"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[2388],{7224:(t,e,s)=>{s.d(e,{L:()=>a,P:()=>w,T:()=>h,a:()=>l,m:()=>p,s:()=>d,u:()=>f});var i=s(1716),n=s(348);Symbol(0);var r;class a extends n.O{constructor(){super(...arguments),this.r=[],this[r]=!1}get length(){return this.r.length}get readonly(){return this[i.L.Zb]}toArray(){return[...this.r]}[(r=i.L.Zb,Symbol.iterator)](){return this.r.values()}[i.L.oa](t,e){const s=this.r.length;""+s in this||Object.defineProperty(this,s,{get(){return this.r[s]}}),this.r.includes(t)||(this.r.push(t),this.dispatchEvent(new n.D("add",{detail:t,trigger:e})))}[i.L.Yb](t,e){const s=this.r.indexOf(t);s>=0&&(this[i.L.oe]?.(t,e),this.r.splice(s,1),this.dispatchEvent(new n.D("remove",{detail:t,trigger:e})))}[i.L.H](t){for(const e of[...this.r])this[i.L.Yb](e,t);this.r=[],this[i.L.Mc](!1,t),this[i.L.ne]?.()}[i.L.Mc](t,e){this[i.L.Zb]!==t&&(this[i.L.Zb]=t,this.dispatchEvent(new n.D("readonly-change",{detail:t,trigger:e})))}}class h{get length(){return this.$.length}constructor(t,e){(0,n.w)(t)?this.$=t:(0,n.i)(t)||(0,n.i)(e)?this.$=[]:this.$=[[t,e]]}start(t){return this.$[t][0]??1/0}end(t){return this.$[t][1]??1/0}}function o(t){if(!t.length)return null;let e=t.start(0);for(let s=1;s<t.length;s++){const i=t.start(s);i<e&&(e=i)}return e}function c(t){if(!t.length)return null;let e=t.end(0);for(let s=1;s<t.length;s++){const i=t.end(s);i>e&&(e=i)}return e}const l=new n.S({audioTracks:[],audioTrack:null,autoplay:!1,autoplayError:null,buffered:new h,duration:0,canLoad:!1,canFullscreen:!1,canOrientScreen:(0,i.a)(),canPictureInPicture:!1,canPlay:!1,controls:!1,controlsVisible:!1,crossorigin:null,currentTime:0,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new h,playing:!1,playsinline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,seekable:new h,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,volume:1,waiting:!1,get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return o(this.buffered)??0},get bufferedEnd(){return c(this.buffered)??0},get seekableStart(){return o(this.seekable)??0},get seekableEnd(){return this.canPlay?c(this.seekable)??1/0:0},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoplaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),u=new Set(["autoplay","canFullscreen","canLoad","canPictureInPicture","canSetVolume","controls","crossorigin","fullscreen","height","inferredViewType","logLevel","loop","mediaHeight","mediaType","mediaWidth","muted","orientation","pictureInPicture","playsinline","pointer","preload","providedPoster","providedStreamType","providedTitle","providedViewType","source","sources","textTrack","textTracks","volume","width"]);function d(t){l.reset(t,(t=>!u.has(t))),(0,n.P)()}const p=(0,n.Q)();function f(){return(0,n.J)(p)}const g=eval,b=/:\s+'?"?(.*?)'?"?\)/g,m=/\s+not\s+/g,y=/\s+and\s+/g,$=/\s+or\s+/g,v=/(\d)px/g;class w extends n.O{constructor(t,e){super(),this.ec=(0,n.m)("true"),this.Xc=new Set,this.Yc=(0,n.m)(!0),this.$matches=(0,n.n)((()=>{let t=this.ec();if("never"===t)return!1;for(const e of this.Xc){const s=this.Le[e](),i=(0,n.r)(s)?`'${s}'`:s+"";t=t.replace((0,n.K)(e),i)}return g(`!!(${t})`)&&this.Yc()})),this.Ke=e,this.Le=t,(0,n.R)((t=>{(0,n.e)(this.jg.bind(this)),(0,n.e)(this.kg.bind(this)),this.Me=t}))}static{this.create=t=>{const e=f();return new w(e.$state,t)}}get query(){return(0,n.T)(this.Ke)}get matches(){return this.$matches()}jg(){const t=this.query;if(""===t)return;if("never"===t)return void this.ec.set(t);const e=t.trim().split(/\s*,\s*/g),s=e.filter((t=>t.startsWith("@media"))).join(","),i=e.filter((t=>!t.startsWith("@media")));if(s.length){const t=window.matchMedia(s.replace(/@media\s/g,"")),e=()=>{this.Yc.set(t.matches)};e(),(0,n.l)(t,"change",e)}if(i.length){const t=this.lg(i),e=Object.keys(l.record);for(const s of t.matchAll(/\(([-a-zA-Z]+)\s/g)){const t=(0,n.U)(s[1]);e.includes(t)&&this.Xc.add(t)}this.ec.set(t)}return()=>{this.Xc.clear(),this.ec.set("true"),this.Yc.set(!0)}}kg(){this.$matches(),this.dispatchEvent(new Event("change"))}lg(t){return t.map((t=>"("+t.replace(b,' == "$1")').replace(m,"!").replace(y," && ").replace($," || ").replace(v,"$1").trim()+")")).join(" || ")}destroy(){this.Me()}}},3659:(t,e,s)=>{s.d(e,{a:()=>u,b:()=>l,c:()=>d,d:()=>p,e:()=>r,f:()=>a,h:()=>f,i:()=>o,o:()=>h,r:()=>c,s:()=>n});var i=s(348);function n(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}function r(t,e){t.hasAttribute("aria-label")||(0,i.e)((function(){(0,i.k)(t,"aria-label",e())}))}function a(t,e,s){for(;e;){if(e===t)return!0;if(s?.(e))break;e=e.parentElement}return!1}function h(t,e){(0,i.l)(t,"pointerup",(t=>{0===t.button&&e(t)})),(0,i.l)(t,"keydown",(t=>{(0,i.b)(t)&&e(t)}))}function o(t){return(0,i.c)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function c(t){let e=(0,i.g)(),s=window.requestAnimationFrame((()=>{(0,i.s)(t,e),s=-1}));return()=>{window.cancelAnimationFrame(s)}}function l(t,e,s){let n,r=t,a=t.parentElement,h=t.content.firstElementChild,o=[];!h&&t.firstElementChild&&(t.innerHTML=t.firstElementChild.outerHTML,t.firstElementChild.remove(),h=t.content.firstElementChild);for(let t=0;t<e;t++)n=document.importNode(h,!0),s?.(n,t),a.insertBefore(n,r.nextSibling),o.push(n),r=n;return(0,i.o)((()=>{for(let t=0;t<o.length;t++)o[t].remove()})),o}function u(t){const e=document.createElement("template");return e.innerHTML=t,e.content}function d(t){return t.cloneNode(!0).firstElementChild}function p(t,e,s,{offsetVarName:n,xOffset:r,yOffset:a,...h}){if(!t)return;const o=s.replace(" ","-").replace("-center","");if((0,i.f)(t,"visibility",e?null:"hidden"),!e)return;const c=t=>s.includes("top")?`calc(-1 * ${t})`:t;return(0,i.h)(e,t,(()=>{(0,i.j)(e,t,{placement:o,...h}).then((({x:e,y:s})=>{Object.assign(t.style,{top:`calc(${s+"px"} + ${c(a?a+"px":`var(--${n}-y-offset, 0px)`)})`,left:`calc(${e+"px"} + ${r?r+"px":`var(--${n}-x-offset, 0px)`})`})}))}))}function f(t){return"none"!==getComputedStyle(t).animationName}},352:(t,e,s)=>{s.d(e,{T:()=>c,a:()=>n,b:()=>b,c:()=>$,d:()=>u,f:()=>l,g:()=>o,i:()=>y,l:()=>h,o:()=>d,p:()=>r});var i=s(348);function n(t,e){const s=new URLSearchParams;for(const t of Object.keys(e))s.set(t,e[t]+"");return t+"?"+s.toString()}function r(t,e="preconnect"){const s=document.querySelector(`link[href="${t}"]`);if(!(0,i.N)(s))return!0;const n=document.createElement("link");return n.rel=e,n.href=t,n.crossOrigin="true",document.head.append(n),!0}const a={};function h(t){if(a[t])return a[t].promise;const e=(0,i.v)(),s=document.querySelector(`script[src="${t}"]`);if(!(0,i.N)(s))return e.resolve(),e.promise;const n=document.createElement("script");return n.src=t,n.onload=()=>{e.resolve(),delete a[t]},n.onerror=()=>{e.reject(),delete a[t]},setTimeout((()=>document.head.append(n)),0),e.promise}function o(t){return"use-credentials"===t?"include":(0,i.r)(t)?"same-origin":void 0}const c={Sa:Symbol(0),M:Symbol(0),Ta:Symbol(0),P:Symbol(0),Ua:Symbol(0),T:Symbol(0),te:Symbol(0)};function l(t,e){for(let s=0,i=t.length;s<i;s++)if(u(t[s],e))return t[s];return null}function u(t,e){return e>=t.startTime&&e<t.endTime}function d(t,e,s){let n=null;function r(){const r=(0,i.r)(e)?[e]:e,a=t.toArray().find((t=>r.includes(t.kind)&&"showing"===t.mode));if(a!==n){if(!a)return s(null),void(n=null);2==a.readyState?s(a):(s(null),a.addEventListener("load",(()=>s(a)),{once:!0})),n=a}}return r(),(0,i.l)(t,"mode-change",r)}var p,f,g;class b extends i.O{constructor(t){super(),this.id="",this.label="",this.language="",this.default=!1,this.P=!1,this.Va=0,this.I="disabled",this.ue={},this.ac=[],this.J=[],this.Wa=[],this[p]=0,this[f]=null,this[g]=null;for(const e of Object.keys(t))this[e]=t[e];this.type||(this.type="vtt"),t.content?s.e(1264).then(s.bind(s,1264)).then((({parseText:e,VTTCue:s,VTTRegion:i})=>{"json"===t.type?this.ve(t.content,s,i):e(t.content,{type:t.type}).then((({cues:t,regions:e})=>{this.J=t,this.ac=e,this.M()}))})):t.src||(this[c.M]=2)}static createId(t){return`id::${t.type}-${t.kind}-${t.src??t.label}`}get metadata(){return this.ue}get regions(){return this.ac}get cues(){return this.J}get activeCues(){return this.Wa}get readyState(){return this[c.M]}get mode(){return this.I}set mode(t){this.setMode(t)}addCue(t,e){let s=0,n=this.J.length;for(s=0;s<n&&!(t.endTime<=this.J[s].startTime);s++);s===n?this.J.push(t):this.J.splice(s,0,t),"cuechange"!==e?.type&&this[c.T]?.track.addCue(t),this.dispatchEvent(new i.D("add-cue",{detail:t,trigger:e})),u(t,this.Va)&&this[c.Ta](this.Va,e)}removeCue(t,e){const s=this.J.indexOf(t);if(s>=0){const n=this.Wa.includes(t);this.J.splice(s,1),this[c.T]?.track.removeCue(t),this.dispatchEvent(new i.D("remove-cue",{detail:t,trigger:e})),n&&this[c.Ta](this.Va,e)}}setMode(t,e){this.I!==t&&(this.I=t,"disabled"===t?(this.Wa=[],this.we()):2===this.readyState?this[c.Ta](this.Va,e):this.xe(),this.dispatchEvent(new i.D("mode-change",{detail:this,trigger:e})),this[c.Ua]?.())}[(p=c.M,f=c.Ua,g=c.T,c.Ta)](t,e){if(this.Va=t,"disabled"===this.mode||!this.J.length)return;const s=[];for(let e=0,i=this.J.length;e<i;e++){const i=this.J[e];u(i,t)&&s.push(i)}let i=s.length!==this.Wa.length;if(!i)for(let t=0;t<s.length;t++)if(!this.Wa.includes(s[t])){i=!0;break}this.Wa=s,i&&this.we(e)}[c.P](){this.P=!0,"disabled"!==this.I&&this.xe()}async xe(){if(this.P&&this.src&&!(this[c.M]>0)){this[c.M]=1,this.dispatchEvent(new i.D("load-start"));try{const{parseResponse:t,VTTCue:e,VTTRegion:i}=await s.e(1264).then(s.bind(s,1264)),n=this[c.Sa]?.(),r=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:o(n)});if("json"===this.type)this.ve(await(await r).text(),e,i);else{const{errors:e,metadata:s,regions:i,cues:n}=await t(r,{type:this.type,encoding:this.encoding});if(0===e[0]?.code)throw e[0];this.ue=s,this.ac=i,this.J=n}this.M()}catch(t){this.ye(t)}}}M(){if(this[c.M]=2,!this.src||"vtt"!==this.type){const t=this[c.T]?.track;if(t)for(const e of this.J)t.addCue(e)}const t=new i.D("load");this[c.Ta](this.Va,t),this.dispatchEvent(t)}ye(t){this[c.M]=3,this.dispatchEvent(new i.D("error",{detail:t}))}ve(t,e,s){try{const{regions:i,cues:n}=$(t,e,s);this.ac=i,this.J=n}catch(t){this.ye(t)}}we(t){this.dispatchEvent(new i.D("cue-change",{trigger:t}))}}const m=/captions|subtitles/;function y(t){return m.test(t.kind)}function $(t,e,s){const n=JSON.parse(t);let r=[],a=[];return n.regions&&s&&(r=n.regions.map((t=>Object.assign(new s,t)))),(n.cues||(0,i.w)(n))&&(a=((0,i.w)(n)?n:n.cues).filter((t=>(0,i.a)(t.startTime)&&(0,i.a)(t.endTime))).map((t=>Object.assign(new e(0,0,""),t)))),{regions:r,cues:a}}},8648:(t,e,s)=>{s.d(e,{A:()=>n,V:()=>a,a:()=>u,b:()=>r,c:()=>h,d:()=>f,g:()=>p,i:()=>l,r:()=>d});var i=s(348);const n=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,r=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),a=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,h=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),o=/\.(m3u8)($|\?)/i,c=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);function l({src:t,type:e}){return(0,i.r)(t)&&o.test(t)||c.has(e)}function u(t){return void 0!==window.MediaStream&&t instanceof window.MediaStream}function d(t,e=2){return Number(t.toFixed(e))}function p(t){return String(t).split(".")[1]?.length??0}function f(t,e,s){return Math.max(t,Math.min(s,e))}},1716:(t,e,s)=>{s.d(e,{I:()=>o,L:()=>n,a:()=>l,b:()=>u,c:()=>f,d:()=>d,e:()=>p,g:()=>c,h:()=>h,i:()=>g});var i=s(348);const n={oa:Symbol(0),Yb:Symbol(0),H:Symbol(0),pa:Symbol(0),Zb:Symbol(0),Mc:Symbol(0),ne:Symbol(0),oe:Symbol(0),pe:Symbol(0)},r=navigator?.userAgent.toLowerCase()||"",a=/iphone|ipad|ipod|ios|crios|fxios/i.test(r),h=/(iphone|ipod)/gi.test(navigator?.platform||""),o=!!window.chrome,c=!!window.safari||a;function l(){return!(0,i.i)(window.screen.orientation)&&!(0,i.i)(window.screen.orientation.lock)&&(0,i.x)(screen.orientation.unlock)}function u(t){return t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0}function d(t){return!!document.pictureInPictureEnabled&&!t.disablePictureInPicture}function p(t){return(0,i.x)(t?.webkitSupportsPresentationMode)&&(0,i.x)(t?.webkitSetPresentationMode)}async function f(){const t=document.createElement("video");return t.volume=.5,await(0,i.y)(0),.5===t.volume}function g(){const t=window?.MediaSource??window?.WebKitMediaSource;if((0,i.i)(t))return!1;const e=t&&(0,i.x)(t.isTypeSupported)&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=window?.SourceBuffer??window?.WebKitSourceBuffer,n=(0,i.i)(s)||!(0,i.i)(s.prototype)&&(0,i.x)(s.prototype.appendBuffer)&&(0,i.x)(s.prototype.remove);return!!e&&!!n}},348:(t,e,s)=>{s.d(e,{$:()=>Mt,D:()=>rt,F:()=>ct,G:()=>dt,H:()=>Xe,I:()=>Ot,J:()=>kt,K:()=>Ft,L:()=>Kt,M:()=>U,N:()=>J,O:()=>ht,P:()=>w,Q:()=>vt,R:()=>$,S:()=>Dt,T:()=>Vt,U:()=>Rt,V:()=>Bt,W:()=>Ne,X:()=>Ct,Y:()=>Xt,Z:()=>wt,_:()=>Nt,a:()=>_,a0:()=>qt,a1:()=>B,a2:()=>Ht,a3:()=>yt,a4:()=>xt,a5:()=>ut,a6:()=>Wt,b:()=>pt,c:()=>lt,d:()=>Ye,e:()=>$t,f:()=>gt,g:()=>k,h:()=>qe,i:()=>X,j:()=>De,k:()=>ft,l:()=>ot,m:()=>bt,n:()=>mt,o:()=>P,p:()=>v,q:()=>I,r:()=>Y,s:()=>x,t:()=>Z,u:()=>G,v:()=>Qt,w:()=>et,x:()=>tt,y:()=>zt,z:()=>It});const i=Symbol(0);let n=!1,r=!1,a=null,h=null,o=null,c=0,l=[],u={};const d=()=>{},p=0,f=1,g=2,b=3;function m(){if(l.length){r=!0;for(let t=0;t<l.length;t++)l[t].$st!==p&&y(l[t]);l=[],n=!1,r=!1}else n=!1}function y(t){let e=[t];for(;t=t[i];)t.$e&&t.$st!==p&&e.push(t);for(let t=e.length-1;t>=0;t--)H(e[t])}function $(t){const e=I();return j(e,t.length?t.bind(null,S.bind(e)):t,null)}function v(t){return j(a,t,null)}function w(){r||m()}function k(){return a}function x(t,e){try{return j(e,t,null)}catch(t){return void L(e,t)}}function T(t,e=a){return e?.$cx[t]}function P(t){if(!t||!a)return t||d;const e=a;return e.$d?Array.isArray(e.$d)?e.$d.push(t):e.$d=[e.$d,t]:e.$d=t,function(){e.$st!==b&&(t.call(null),V(e.$d)?e.$d=null:Array.isArray(e.$d)&&e.$d.splice(e.$d.indexOf(t),1))}}function S(t=!0){if(this.$st===b)return;let e=t?this.$ps||this[i]:this,s=this.$ns,n=null;for(;s&&s[i]===this;)S.call(s,!0),E(s),n=s.$ns,s.$ns=null,s=n;t&&E(this),s&&(s.$ps=t?this.$ps:this),e&&(e.$ns=s)}function E(t){t.$st=b,t.$d&&A(t),t.$s&&z(t,0),t.$ps&&(t.$ps.$ns=null),t[i]=null,t.$s=null,t.$o=null,t.$ps=null,t.$cx=u,t.$eh=null}function A(t){try{if(Array.isArray(t.$d))for(let e=t.$d.length-1;e>=0;e--){const s=t.$d[e];s.call(s)}else t.$d.call(t.$d);t.$d=null}catch(e){L(t,e)}}function j(t,e,s){const i=a,n=h;a=t,h=s;try{return e.call(t)}finally{a=i,h=n}}function L(t,e){if(!t||!t.$eh)throw e;let s=0,i=t.$eh.length,n=C(e);for(s=0;s<i;s++)try{t.$eh[s](n);break}catch(t){n=C(t)}if(s===i)throw n}function C(t){return t instanceof Error?t:Error(JSON.stringify(t))}function O(){return this.$st===b||(h&&!this.$e&&(!o&&h.$s&&h.$s[c]==this?c++:o?o.push(this):o=[this]),this.$c&&H(this)),this.$v}function M(t){const e=V(t)?t(this.$v):t;if(this.$ch(this.$v,e)&&(this.$v=e,this.$o))for(let t=0;t<this.$o.length;t++)Q(this.$o[t],g);return this.$v}const q=function(){this[i]=null,this.$ns=null,this.$ps=null,a&&a.append(this)},D=q.prototype;function I(){return new q}D.$cx=u,D.$eh=null,D.$c=null,D.$d=null,D.append=function(t){if(t[i]=this,t.$ps=this,this.$ns)if(t.$ns){let e=t.$ns;for(;e.$ns;)e=e.$ns;e.$ns=this.$ns,this.$ns.$ps=e}else t.$ns=this.$ns,this.$ns.$ps=t;this.$ns=t,t.$cx=t.$cx===u?this.$cx:{...this.$cx,...t.$cx},this.$eh&&(t.$eh=t.$eh?[...t.$eh,...this.$eh]:this.$eh)},D.dispose=function(){S.call(this)};const F=function(t,e,s){q.call(this),this.$st=e?g:p,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=t,e&&(this.$c=e),s&&s.dirty&&(this.$ch=s.dirty)},R=F.prototype;function N(t,e,s){return new F(t,e,s)}function V(t){return"function"==typeof t}function H(t){if(t.$st===f)for(let e=0;e<t.$s.length&&(H(t.$s[e]),t.$st!==g);e++);t.$st===g?K(t):t.$st=p}function W(t){t.$ns&&t.$ns[i]===t&&S.call(t,!1),t.$d&&A(t),t.$eh=t[i]?t[i].$eh:null}function K(t){let e=o,s=c;o=null,c=0;try{W(t);const e=j(t,t.$c,t);if(o){if(t.$s&&z(t,c),t.$s&&c>0){t.$s.length=c+o.length;for(let e=0;e<o.length;e++)t.$s[c+e]=o[e]}else t.$s=o;let e;for(let s=c;s<t.$s.length;s++)e=t.$s[s],e.$o?e.$o.push(t):e.$o=[t]}else t.$s&&c<t.$s.length&&(z(t,c),t.$s.length=c);!t.$e&&t.$i?M.call(t,e):(t.$v=e,t.$i=!0)}catch(e){return L(t,e),void(t.$st===g&&(W(t),t.$s&&z(t,0)))}o=e,c=s,t.$st=p}function Q(t,e){if(!(t.$st>=e)&&(t.$e&&t.$st===p&&(l.push(t),n||(n=!0,queueMicrotask(m))),t.$st=e,t.$o))for(let e=0;e<t.$o.length;e++)Q(t.$o[e],f)}function z(t,e){let s,i;for(let n=e;n<t.$s.length;n++)s=t.$s[n],s.$o&&(i=s.$o.indexOf(t),s.$o[i]=s.$o[s.$o.length-1],s.$o.pop())}function B(...t){}function J(t){return null===t}function X(t){return void 0===t}function U(t){return J(t)||X(t)}function Z(t){return t?.constructor===Object}function _(t){return"number"==typeof t&&!Number.isNaN(t)}function Y(t){return"string"==typeof t}function G(t){return"boolean"==typeof t}function tt(t){return"function"==typeof t}function et(t){return Array.isArray(t)}var st;Object.setPrototypeOf(R,D),R.$ch=function(t,e){return t!==e},R.call=O;const it=Event,nt=Symbol("DOM_EVENT");class rt extends it{constructor(t,...e){super(t,e[0]),this[st]=!0,this.triggers=new at,this.detail=e[0]?.detail;const s=e[0]?.trigger;s&&this.triggers.add(s)}static{st=nt}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}}class at{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(t){this.chain.push(t),function(t){return!!t?.[nt]}(t)&&this.chain.push(...t.triggers)}remove(t){return this.chain.splice(this.chain.indexOf(t),1)[0]}has(t){return this.chain.some((e=>e===t))}hasType(t){return!!this.findType(t)}findType(t){return this.chain.find((e=>e.type===t))}walk(t){for(const e of this.chain){const s=t(e);if(s)return[e,s]}}[Symbol.iterator](){return this.chain.values()}}class ht extends EventTarget{addEventListener(t,e,s){return super.addEventListener(t,e,s)}removeEventListener(t,e,s){return super.removeEventListener(t,e,s)}}function ot(t,e,s,i){return t.addEventListener(e,s,i),P((()=>t.removeEventListener(e,s,i)))}function ct(t){return!!t?.type.startsWith("pointer")}function lt(t){return!!t?.type.startsWith("touch")}function ut(t){return/^(click|mouse)/.test(t?.type??"")}function dt(t){return!!t?.type.startsWith("key")}function pt(t){return dt(t)&&("Enter"===t.key||" "===t.key)}function ft(t,e,s){if(t)if(s||""===s||0===s){const i=!0===s?"":s+"";t.getAttribute(e)!==i&&t.setAttribute(e,i)}else t.removeAttribute(e)}function gt(t,e,s){t&&(s||0===s?t.style.setProperty(e,s+""):t.style.removeProperty(e))}function bt(t,e){const s=N(t,null,e),n=O.bind(s);return n[i]=!0,n.set=M.bind(s),n}function mt(t,e){const s=N(e?.initial,t,e),n=O.bind(s);return n[i]=!0,n}function yt(t){return function(t){return V(t)&&i in t}(t)&&"set"in t}const $t=function(t,e){const s=N(null,(function(){let e=t();return V(e)&&P(e),null}),void 0);return s.$e=!0,K(s),S.bind(s,!0)};function vt(t){return{id:Symbol(),provide:t}}function wt(t,e,s=k()){const i=!X(e);!function(t,e,s=a){s&&(s.$cx={...s.$cx,[t]:e})}(t.id,i?e:t.provide?.(),s)}function kt(t){return T(t.id)}function xt(t){return!X(T(t.id))}const Tt=Symbol(0),Pt=Symbol(0),St=Symbol(0);var Et;const At={};class jt{constructor(t,e,s){this[Et]=null,this.$el=bt(null),this.a=null,this.d=null,this.f=null,this.g=null,this.e=null,this.o=!1,this.i=At,this.b=null,this.c=null,this.l=[],this.m=[],this.j=[],this.n=[],this.d=e,s?.scope&&s.scope.append(e);let i=t.state,n=t.props;if(i&&(this.h=i.create(),this.k=new Proxy(this.h,{get:(t,e)=>this.h[e]()}),wt(i,this.h)),n&&(this.i=function(t){const e={};for(const s of Object.keys(t)){const i=t[s];e[s]=bt(i,i)}return e}(n),s?.props))for(const t of Object.keys(s.props))this.i[t]?.set(s.props[t]);P(this.p.bind(this))}static{Et=St}w(){x((()=>{for(const t of this.l)t()}),this.d)}x(t){this.a||(this.a=t,this.$el.set(t),x((()=>{this.f=I(),x((()=>{for(const t of this.m)t(this.a);this.q(),this.r()}),this.f)}),this.d),t.dispatchEvent(new Event("attached")))}s(){this.f?.dispose(),this.f=null,this.g=null,this.a=null,this.$el.set(null)}y(){this.a&&this.f&&this.j.length&&x((()=>{this.g=I(),x((()=>{for(const t of this.j)t(this.a)}),this.g)}),this.f)}z(){this.g?.dispose(),this.g=null}p(){if(this.o)return;this.o=!0,x((()=>{for(const t of this.n)t(this.a)}),this.d);const t=this.a;this.s(),this.d.dispose(),this.l.length=0,this.m.length=0,this.j.length=0,this.n.length=0,this.e=null,this.b=null,this.c=null,this.i=At,this.d=null,this.k=At,this.h=null,t&&delete t.$}t(t){t.onSetup&&this.l.push(t.onSetup.bind(t)),t.onAttach&&this.m.push(t.onAttach.bind(t)),t.onConnect&&this.j.push(t.onConnect.bind(t)),t.onDestroy&&this.n.push(t.onDestroy.bind(t))}q(){if(this.b)for(const t of Object.keys(this.b))tt(this.b[t])?$t(this.u.bind(this,t)):ft(this.a,t,this.b[t])}r(){if(this.c)for(const t of Object.keys(this.c))tt(this.c[t])?$t(this.v.bind(this,t)):gt(this.a,t,this.c[t])}u(t){ft(this.a,t,this.b[t].call(this.e))}v(t){gt(this.a,t,this.c[t].call(this.e))}}let Lt={$$:null};class Ct extends EventTarget{constructor(){super(),Lt.$$&&this.attach(Lt)}get el(){return this.$$.a}get $el(){return this.$$.$el()}get scope(){return this.$$.d}get attachScope(){return this.$$.f}get connectScope(){return this.$$.g}get $props(){return this.$$.i}get $state(){return this.$$.h}get state(){return this.$$.k}attach({$$:t}){return this.$$=t,t.t(this),this}addEventListener(t,e,s){this.listen(t,e,s)}removeEventListener(t,e,s){this.el?.removeEventListener(t,e,s)}setAttributes(t){this.$$.b||(this.$$.b={}),Object.assign(this.$$.b,t)}setStyles(t){this.$$.c||(this.$$.c={}),Object.assign(this.$$.c,t)}setCSSVars(t){this.setStyles(t)}createEvent(t,...e){return new rt(t,e[0])}dispatch(t,...e){if(!this.el)return!1;const s=t instanceof Event?t:new rt(t,e[0]);return Object.defineProperty(s,"target",{get:()=>this.$$.e}),j(null,(()=>(this.$$[St]?.(s),this.el.dispatchEvent(s))),null)}dispatchEvent(t){return this.dispatch(t)}listen(t,e,s){return this.el?ot(this.el,t,e,s):B}}class Ot extends Ct{subscribe(t){return x((()=>$t((()=>t(this.state)))),this.$$.d)}destroy(){this.$$.p()}}function Mt(t,e,s){t[Tt]||(t[Tt]=new Set),t[Tt].add(e)}function qt(t,e,s){t[Pt]||(t[Pt]=new Set),t[Pt].add(e)}class Dt{constructor(t){this.id=Symbol(0),this.record=t,this.A=Object.getOwnPropertyDescriptors(t)}create(){const t={},e=new Proxy(t,{get:(e,s)=>t[s]()});for(const s of Object.keys(this.record)){const i=this.A[s].get;t[s]=i?mt(i.bind(e)):bt(this.record[s])}return t}reset(t,e){for(const s of Object.keys(t))this.A[s].get||e&&!e(s)||t[s].set(this.record[s])}}function It(t){return kt(t)}function Ft(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rt(t){return t.replace(/-./g,(t=>t[1].toUpperCase()))}function Nt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Vt(t){return tt(t)?t():t}function Ht(t){return t?"true":"false"}function Wt(){const t=new Set;return{add(...e){for(const s of e)t.add(s)},empty(){for(const e of t)e();t.clear()}}}function Kt(){const t=Wt();return P(t.empty),t}function Qt(){let t,e;return{promise:new Promise(((s,i)=>{t=s,e=i})),resolve:t,reject:e}}function zt(t){return new Promise((e=>setTimeout(e,t)))}function Bt(t){let e,s=-1;return function(...i){e=i,s>=0||(s=window.requestAnimationFrame((()=>{t.apply(this,e),s=-1,e=void 0})))}}const Jt="undefined"!=typeof window?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):B;function Xt(t,e){return new Promise((s=>{Jt((e=>{t?.(e),s()}),e)}))}const Ut=Math.min,Zt=Math.max,_t=Math.round,Yt=Math.floor,Gt=t=>({x:t,y:t});function te(t){return t.split("-")[0]}function ee(t){return["top","bottom"].includes(te(t))?"y":"x"}function se(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function ie(t,e,s){let{reference:i,floating:n}=t;const r=ee(e),a=function(t){return"x"===ee(t)?"y":"x"}(e),h="y"===a?"height":"width",o=te(e),c="y"===r,l=i.x+i.width/2-n.width/2,u=i.y+i.height/2-n.height/2,d=i[h]/2-n[h]/2;let p;switch(o){case"top":p={x:l,y:i.y-n.height};break;case"bottom":p={x:l,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:u};break;case"left":p={x:i.x-n.width,y:u};break;default:p={x:i.x,y:i.y}}switch(function(t){return t.split("-")[1]}(e)){case"start":p[a]-=d*(s&&c?-1:1);break;case"end":p[a]+=d*(s&&c?-1:1)}return p}function ne(t){return he(t)?(t.nodeName||"").toLowerCase():"#document"}function re(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function ae(t){var e;return null==(e=(he(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function he(t){return t instanceof Node||t instanceof re(t).Node}function oe(t){return t instanceof Element||t instanceof re(t).Element}function ce(t){return t instanceof HTMLElement||t instanceof re(t).HTMLElement}function le(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof re(t).ShadowRoot)}function ue(t){const{overflow:e,overflowX:s,overflowY:i,display:n}=be(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+s)&&!["inline","contents"].includes(n)}function de(t){return["table","td","th"].includes(ne(t))}function pe(t){const e=fe(),s=be(t);return"none"!==s.transform||"none"!==s.perspective||!!s.containerType&&"normal"!==s.containerType||!e&&!!s.backdropFilter&&"none"!==s.backdropFilter||!e&&!!s.filter&&"none"!==s.filter||["transform","perspective","filter"].some((t=>(s.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(s.contain||"").includes(t)))}function fe(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function ge(t){return["html","body","#document"].includes(ne(t))}function be(t){return re(t).getComputedStyle(t)}function me(t){return oe(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ye(t){if("html"===ne(t))return t;const e=t.assignedSlot||t.parentNode||le(t)&&t.host||ae(t);return le(e)?e.host:e}function $e(t){const e=ye(t);return ge(e)?t.ownerDocument?t.ownerDocument.body:t.body:ce(e)&&ue(e)?e:$e(e)}function ve(t,e,s){var i;void 0===e&&(e=[]),void 0===s&&(s=!0);const n=$e(t),r=n===(null==(i=t.ownerDocument)?void 0:i.body),a=re(n);return r?e.concat(a,a.visualViewport||[],ue(n)?n:[],a.frameElement&&s?ve(a.frameElement):[]):e.concat(n,ve(n,[],s))}function we(t){const e=be(t);let s=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const n=ce(t),r=n?t.offsetWidth:s,a=n?t.offsetHeight:i,h=_t(s)!==r||_t(i)!==a;return h&&(s=r,i=a),{width:s,height:i,$:h}}function ke(t){return oe(t)?t:t.contextElement}function xe(t){const e=ke(t);if(!ce(e))return Gt(1);const s=e.getBoundingClientRect(),{width:i,height:n,$:r}=we(e);let a=(r?_t(s.width):s.width)/i,h=(r?_t(s.height):s.height)/n;return a&&Number.isFinite(a)||(a=1),h&&Number.isFinite(h)||(h=1),{x:a,y:h}}const Te=Gt(0);function Pe(t){const e=re(t);return fe()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Te}function Se(t,e,s,i){void 0===e&&(e=!1),void 0===s&&(s=!1);const n=t.getBoundingClientRect(),r=ke(t);let a=Gt(1);e&&(i?oe(i)&&(a=xe(i)):a=xe(t));const h=function(t,e,s){return void 0===e&&(e=!1),!(!s||e&&s!==re(t))&&e}(r,s,i)?Pe(r):Gt(0);let o=(n.left+h.x)/a.x,c=(n.top+h.y)/a.y,l=n.width/a.x,u=n.height/a.y;if(r){const t=re(r),e=i&&oe(i)?re(i):i;let s=t.frameElement;for(;s&&i&&e!==t;){const t=xe(s),e=s.getBoundingClientRect(),i=be(s),n=e.left+(s.clientLeft+parseFloat(i.paddingLeft))*t.x,r=e.top+(s.clientTop+parseFloat(i.paddingTop))*t.y;o*=t.x,c*=t.y,l*=t.x,u*=t.y,o+=n,c+=r,s=re(s).frameElement}}return se({width:l,height:u,x:o,y:c})}function Ee(t){return Se(ae(t)).left+me(t).scrollLeft}function Ae(t,e,s){let i;if("viewport"===e)i=function(t,e){const s=re(t),i=ae(t),n=s.visualViewport;let r=i.clientWidth,a=i.clientHeight,h=0,o=0;if(n){r=n.width,a=n.height;const t=fe();(!t||t&&"fixed"===e)&&(h=n.offsetLeft,o=n.offsetTop)}return{width:r,height:a,x:h,y:o}}(t,s);else if("document"===e)i=function(t){const e=ae(t),s=me(t),i=t.ownerDocument.body,n=Zt(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=Zt(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-s.scrollLeft+Ee(t);const h=-s.scrollTop;return"rtl"===be(i).direction&&(a+=Zt(e.clientWidth,i.clientWidth)-n),{width:n,height:r,x:a,y:h}}(ae(t));else if(oe(e))i=function(t,e){const s=Se(t,!0,"fixed"===e),i=s.top+t.clientTop,n=s.left+t.clientLeft,r=ce(t)?xe(t):Gt(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:n*r.x,y:i*r.y}}(e,s);else{const s=Pe(t);i={...e,x:e.x-s.x,y:e.y-s.y}}return se(i)}function je(t,e){const s=ye(t);return!(s===e||!oe(s)||ge(s))&&("fixed"===be(s).position||je(s,e))}function Le(t,e,s){const i=ce(e),n=ae(e),r="fixed"===s,a=Se(t,!0,r,e);let h={scrollLeft:0,scrollTop:0};const o=Gt(0);if(i||!i&&!r)if(("body"!==ne(e)||ue(n))&&(h=me(e)),i){const t=Se(e,!0,r,e);o.x=t.x+e.clientLeft,o.y=t.y+e.clientTop}else n&&(o.x=Ee(n));return{x:a.left+h.scrollLeft-o.x,y:a.top+h.scrollTop-o.y,width:a.width,height:a.height}}function Ce(t,e){return ce(t)&&"fixed"!==be(t).position?e?e(t):t.offsetParent:null}function Oe(t,e){const s=re(t);if(!ce(t))return s;let i=Ce(t,e);for(;i&&de(i)&&"static"===be(i).position;)i=Ce(i,e);return i&&("html"===ne(i)||"body"===ne(i)&&"static"===be(i).position&&!pe(i))?s:i||function(t){let e=ye(t);for(;ce(e)&&!ge(e);){if(pe(e))return e;e=ye(e)}return null}(t)||s}const Me={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:s,strategy:i}=t;const n=ce(s),r=ae(s);if(s===r)return e;let a={scrollLeft:0,scrollTop:0},h=Gt(1);const o=Gt(0);if((n||!n&&"fixed"!==i)&&(("body"!==ne(s)||ue(r))&&(a=me(s)),ce(s))){const t=Se(s);h=xe(s),o.x=t.x+s.clientLeft,o.y=t.y+s.clientTop}return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-a.scrollLeft*h.x+o.x,y:e.y*h.y-a.scrollTop*h.y+o.y}},getDocumentElement:ae,getClippingRect:function(t){let{element:e,boundary:s,rootBoundary:i,strategy:n}=t;const r=[..."clippingAncestors"===s?function(t,e){const s=e.get(t);if(s)return s;let i=ve(t,[],!1).filter((t=>oe(t)&&"body"!==ne(t))),n=null;const r="fixed"===be(t).position;let a=r?ye(t):t;for(;oe(a)&&!ge(a);){const e=be(a),s=pe(a);s||"fixed"!==e.position||(n=null),(r?!s&&!n:!s&&"static"===e.position&&n&&["absolute","fixed"].includes(n.position)||ue(a)&&!s&&je(t,a))?i=i.filter((t=>t!==a)):n=e,a=ye(a)}return e.set(t,i),i}(e,this._c):[].concat(s),i],a=r[0],h=r.reduce(((t,s)=>{const i=Ae(e,s,n);return t.top=Zt(i.top,t.top),t.right=Ut(i.right,t.right),t.bottom=Ut(i.bottom,t.bottom),t.left=Zt(i.left,t.left),t}),Ae(e,a,n));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}},getOffsetParent:Oe,getElementRects:async function(t){let{reference:e,floating:s,strategy:i}=t;const n=this.getOffsetParent||Oe,r=this.getDimensions;return{reference:Le(e,await n(s),i),floating:{x:0,y:0,...await r(s)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return we(t)},getScale:xe,isElement:oe,isRTL:function(t){return"rtl"===be(t).direction}};function qe(t,e,s,i){void 0===i&&(i={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:h="function"==typeof IntersectionObserver,animationFrame:o=!1}=i,c=ke(t),l=n||r?[...c?ve(c):[],...ve(e)]:[];l.forEach((t=>{n&&t.addEventListener("scroll",s,{passive:!0}),r&&t.addEventListener("resize",s)}));const u=c&&h?function(t,e){let s,i=null;const n=ae(t);function r(){clearTimeout(s),i&&i.disconnect(),i=null}return function a(h,o){void 0===h&&(h=!1),void 0===o&&(o=1),r();const{left:c,top:l,width:u,height:d}=t.getBoundingClientRect();if(h||e(),!u||!d)return;const p={rootMargin:-Yt(l)+"px "+-Yt(n.clientWidth-(c+u))+"px "+-Yt(n.clientHeight-(l+d))+"px "+-Yt(c)+"px",threshold:Zt(0,Ut(1,o))||1};let f=!0;function g(t){const e=t[0].intersectionRatio;if(e!==o){if(!f)return a();e?a(!1,e):s=setTimeout((()=>{a(!1,1e-7)}),100)}f=!1}try{i=new IntersectionObserver(g,{...p,root:n.ownerDocument})}catch(t){i=new IntersectionObserver(g,p)}i.observe(t)}(!0),r}(c,s):null;let d,p=-1,f=null;a&&(f=new ResizeObserver((t=>{let[i]=t;i&&i.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{f&&f.observe(e)}))),s()})),c&&!o&&f.observe(c),f.observe(e));let g=o?Se(t):null;return o&&function e(){const i=Se(t);!g||i.x===g.x&&i.y===g.y&&i.width===g.width&&i.height===g.height||s(),g=i,d=requestAnimationFrame(e)}(),s(),()=>{l.forEach((t=>{n&&t.removeEventListener("scroll",s),r&&t.removeEventListener("resize",s)})),u&&u(),f&&f.disconnect(),f=null,o&&cancelAnimationFrame(d)}}const De=(t,e,s)=>{const i=new Map,n={platform:Me,...s},r={...n.platform,_c:i};return(async(t,e,s)=>{const{placement:i="bottom",strategy:n="absolute",middleware:r=[],platform:a}=s,h=r.filter(Boolean),o=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:l,y:u}=ie(c,i,o),d=i,p={},f=0;for(let s=0;s<h.length;s++){const{name:r,fn:g}=h[s],{x:b,y:m,data:y,reset:$}=await g({x:l,y:u,initialPlacement:i,placement:d,strategy:n,middlewareData:p,rects:c,platform:a,elements:{reference:t,floating:e}});l=null!=b?b:l,u=null!=m?m:u,p={...p,[r]:{...p[r],...y}},$&&f<=50&&(f++,"object"==typeof $&&($.placement&&(d=$.placement),$.rects&&(c=!0===$.rects?await a.getElementRects({reference:t,floating:e,strategy:n}):$.rects),({x:l,y:u}=ie(c,d,o))),s=-1)}return{x:l,y:u,placement:d,strategy:n,middlewareData:p}})(t,e,{...n,platform:r})},Ie=t=>null===t?"":t+"",Fe=t=>null===t?null:t+"",Re=t=>null===t?0:Number(t),Ne=t=>null!==t,Ve=()=>null,He=t=>null===t?[]:JSON.parse(t),We=t=>null===t?{}:JSON.parse(t);function Ke(t){if(null===t)return Fe;switch(typeof t){case"undefined":case"string":default:return Ie;case"boolean":return Ne;case"number":return Re;case"function":return Ve;case"object":return et(t)?He:We}}const Qe=Symbol(0),ze=Symbol(0),Be=Symbol(0),Je=Symbol(0);function Xe(t,e){var s,i,n;class r extends t{constructor(...t){if(super(...t),this[i]=0,this[n]=null,this.keepAlive=!1,this.forwardKeepAlive=!0,this.$=x((()=>function(t,e){return $((()=>{Lt.$$=new jt(t,k(),undefined);const e=new t;return Lt.$$.e=e,Lt.$$=null,e}))}(e)),null),this.$.$$.t(this),e.props){const t=this.$props,s=Object.getOwnPropertyDescriptors(this);for(const i of Object.keys(s))i in e.props&&(t[i].set(this[i]),delete this[i])}}static{this[s]=null}static get observedAttributes(){if(!this[Qe]&&e.props){const t=new Map;for(const s of Object.keys(e.props)){let i=this.attrs?.[s],n=Y(i)?i:i?i?.attr:i;!1!==n&&(n||(n=Ft(s)),t.set(n,{C:s,B:i&&!Y(i)&&i?.converter||Ke(e.props[s])}))}this[Qe]=t}return this[Qe]?Array.from(this[Qe].keys()):[]}get scope(){return this.$.$$.d}get attachScope(){return this.$.$$.f}get connectScope(){return this.$.$$.g}get $props(){return this.$.$$.i}get $state(){return this.$.$$.h}get state(){return this.$.state}attributeChangedCallback(t,e,s){const i=this.constructor;if(!i[Qe])return void super.attributeChangedCallback?.(t,e,s);const n=i[Qe].get(t);n&&(this[n.C]=n.B(s))}connectedCallback(){const t=this.$?.$$;if(!t||t.o)return;if(2!==this[Be])return void Ue.call(this);if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),t.y(),et(this[Je])&&function(t,e){for(const s of t)s(e)}(this[Je],this),this[Je]=null;const e=super.connectedCallback;e&&x((()=>e.call(this)),this.connectScope)}disconnectedCallback(){const t=this.$?.$$;if(!t||t.o)return;t.z();const e=super.disconnectedCallback;e&&e.call(this),this.keepAlive||this.hasAttribute("keep-alive")||setTimeout((()=>{requestAnimationFrame((()=>{this.isConnected||t.p()}))}),0)}[(s=Qe,i=Be,n=Je,ze)](){const t=this.$.$$,e=this.constructor;if(t.o)return;const s=e[Qe];if(s)for(const e of this.attributes){let i=s.get(e.name);i&&i.B&&t.i[i.C].set(i.B(this.getAttribute(e.name)))}t.w(),t.x(this),this[Be]=2,this.connectedCallback()}subscribe(t){return this.$.subscribe(t)}destroy(){this.disconnectedCallback(),this.$.destroy()}}return function(t,e){const s=t.prototype,i=e.prototype;if(e.props)for(const t of Object.keys(e.props))Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get(){return this.$props[t]()},set(e){this.$props[t].set(e)}});if(i[Tt])for(const t of i[Tt])Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get(){return this.$[t]},set(e){this.$[t]=e}});if(i[Pt])for(const t of i[Pt])s[t]=function(...e){return this.$[t](...e)}}(r,e),r}function Ue(){if(0!==this[Be])return;this[Be]=1;const t=function(t){let e=t.parentNode,s=t.localName.split("-",1)[0]+"-";for(;e;){if(1===e.nodeType&&e.localName.startsWith(s))return e;e=e.parentNode}return null}(this),e=t&&window.customElements.get(t.localName),s=t&&2===t[Be];!t||e&&s?_e.call(this,t):Ze.call(this,t)}async function Ze(t){await window.customElements.whenDefined(t.localName),2!==t[Be]&&await new Promise((e=>(t[Je]??=[]).push(e))),_e.call(this,t)}function _e(t){if(this.isConnected){if(t){t.keepAlive&&t.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));const e=this.$.$$.d;e&&t.$.$$.f.append(e)}this[ze]()}}function Ye(t,e=!1){!e&&window.customElements.get(t.tagName)||window.customElements.define(t.tagName,t)}},8:(t,e,s)=>{s.d(e,{$:()=>ce,D:()=>gs,E:()=>ms,G:()=>kt,I:()=>St,J:()=>Et,K:()=>Ct,L:()=>qt,M:()=>wt,N:()=>Dt,O:()=>It,P:()=>Ot,Q:()=>Ft,R:()=>Rt,S:()=>Jt,T:()=>Yt,U:()=>Nt,Z:()=>ee,_:()=>oe,a:()=>dt,a1:()=>le,a2:()=>ue,a3:()=>ge,a4:()=>Te,a5:()=>Ee,a6:()=>Ae,a8:()=>Le,a9:()=>Ie,aa:()=>Ne,ab:()=>Ke,ac:()=>Je,ad:()=>_e,ae:()=>es,af:()=>rs,ag:()=>as,ah:()=>os,ai:()=>cs,aj:()=>ls,al:()=>rt,am:()=>Tt,b:()=>bs,u:()=>$s});var i=s(348),n=s(7224),r=s(352),a=s(3659),h=s(1716),o=s(4276),c=s(8648),l={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},u=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],d=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],p=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],f="undefined"!=typeof window&&void 0!==window.document?window.document:{},g="fullscreenEnabled"in f&&Object.keys(l)||u[0]in f&&u||d[0]in f&&d||p[0]in f&&p||[],b={requestFullscreen:function(t){return t[g[l.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[g[l.requestFullscreen]]},get exitFullscreen(){return f[g[l.exitFullscreen]].bind(f)},get fullscreenPseudoClass(){return":"+g[l.fullscreen]},addEventListener:function(t,e,s){return f.addEventListener(g[l[t]],e,s)},removeEventListener:function(t,e,s){return f.removeEventListener(g[l[t]],e,s)},get fullscreenEnabled(){return Boolean(f[g[l.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return f[g[l.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return f[("on"+g[l.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return f[("on"+g[l.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return f[("on"+g[l.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return f[("on"+g[l.fullscreenerror]).toLowerCase()]=t}};const m=b.fullscreenEnabled;class y extends i.X{constructor(){super(...arguments),this.ub=!1,this.Nc=!1}get active(){return this.Nc}get supported(){return m}onConnect(){(0,i.l)(b,"fullscreenchange",this.Oc.bind(this)),(0,i.l)(b,"fullscreenerror",this._b.bind(this)),(0,i.o)(this.ya.bind(this))}async ya(){m&&await this.exit()}Oc(t){const e=$(this.el);e!==this.Nc&&(e||(this.ub=!1),this.Nc=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}_b(t){this.ub&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.ub=!1)}async enter(){try{if(this.ub=!0,!this.el||$(this.el))return;return v(),b.requestFullscreen(this.el)}catch(t){throw this.ub=!1,t}}async exit(){if(this.el&&$(this.el))return v(),b.exitFullscreen()}}function $(t){if(b.fullscreenElement===t)return!0;try{return t.matches(b.fullscreenPseudoClass)}catch(t){return!1}}function v(){if(!m)throw Error("[vidstack] no fullscreen API")}class w extends i.X{constructor(){super(...arguments),this.vb=(0,i.m)(this.qe()),this.Ra=(0,i.m)(!1)}get type(){return this.vb()}get locked(){return this.Ra()}get portrait(){return this.vb().startsWith("portrait")}get landscape(){return this.vb().startsWith("landscape")}static{this.supported=(0,h.a)()}get supported(){return w.supported}onConnect(){if(this.supported)(0,i.l)(screen.orientation,"change",this.re.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.re.bind(this),(0,i.o)((()=>t.onchange=null))}(0,i.o)(this.ya.bind(this))}async ya(){this.supported&&this.Ra()&&await this.unlock()}re(t){this.vb.set(this.qe()),this.dispatch("orientation-change",{detail:{orientation:(0,i.p)(this.vb),lock:this.$b},trigger:t})}async lock(t){(0,i.p)(this.Ra)||this.$b===t||(this.se(),await screen.orientation.lock(t),this.Ra.set(!0),this.$b=t)}async unlock(){(0,i.p)(this.Ra)&&(this.se(),this.$b=void 0,await screen.orientation.unlock(),this.Ra.set(!1))}se(){if(!this.supported)throw Error("[vidstack] no orientation API")}qe(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}class k{constructor(t=void 0){this.tb=t,this.A=null,this.aa=null,this.Pc=-1}setTarget(t){this.A=t}getPlayer(t){return this.aa||(t??this.A)?.dispatchEvent(new i.D("find-media-player",{detail:t=>{this.aa=t},bubbles:!0,composed:!0})),this.aa}setPlayer(t){this.aa=t}startLoading(t){this.s("media-start-loading",t)}play(t){this.s("media-play-request",t)}pause(t){this.s("media-pause-request",t)}mute(t){this.s("media-mute-request",t)}unmute(t){this.s("media-unmute-request",t)}enterFullscreen(t,e){this.s("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.s("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.s("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.s("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.s("media-enter-pip-request",t)}exitPictureInPicture(t){this.s("media-exit-pip-request",t)}seeking(t,e){this.s("media-seeking-request",e,t)}seek(t,e){this.s("media-seek-request",e,t)}seekToLiveEdge(t){this.s("media-live-edge-request",t)}changeVolume(t,e){this.s("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.s("media-audio-track-change-request",e,t)}changeQuality(t,e){this.s("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.s("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.s("media-rate-change-request",e,t)}resumeControls(t){this.s("media-resume-controls-request",t)}pauseControls(t){this.s("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e?.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const e=s.indexOf(i);this.changeTextTrackMode(e,"disabled",t)}}toggleCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const e=s.indexOf(i);this.changeTextTrackMode(e,"disabled",t),this.Pc=e}else{let e=this.Pc;s[e]&&(0,r.i)(s[e])||(e=-1),-1===e&&(e=s.findIndex((t=>(0,r.i)(t)&&t.default))),-1===e&&(e=s.findIndex((t=>(0,r.i)(t)))),e>=0&&this.changeTextTrackMode(e,"showing",t),this.Pc=-1}}s(t,e,s){const n=new i.D(t,{bubbles:!0,composed:!0,detail:s,trigger:e});let r=e?.target||null;r&&r instanceof i.I&&(r=r.el);const a=!r||r===document||r===window||r===document.body||this.aa?.el&&r instanceof Node&&!this.aa.el.contains(r);r=a?this.A??this.getPlayer()?.el:r??this.A,this.aa?this.aa.canPlayQueue.k(t,(()=>r?.dispatchEvent(n))):r?.dispatchEvent(n)}za(t){}}class x extends i.X{}class T extends x{constructor(){super(...arguments),this.Qc=-2,this.Xa=!1,this.ze=(0,i.m)(!1),this.Rc=(0,i.m)(!1),this.wb=null,this.defaultDelay=2e3}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.ze()||t()}set hideOnMouseLeave(t){this.ze.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.Sc(),this.Xa||this.bc(!0,t,e)}hide(t=this.defaultDelay,e){this.Sc(),this.Xa||this.bc(!1,t,e)}pause(t){this.Xa=!0,this.Sc(),this.bc(!0,0,t)}resume(t){this.Xa=!1,this.$state.paused()||this.bc(!1,this.defaultDelay,t)}onConnect(){(0,i.e)(this.bg.bind(this)),(0,i.e)(this.Tc.bind(this));const t=this.xb.bind(this),e=this.Aa.bind(this);this.listen("can-play",(t=>this.show(0,t))),this.listen("play",t),this.listen("pause",e),this.listen("autoplay-fail",e)}bg(){const{started:t,pointer:e,paused:s}=this.$state;if(!t()||"fine"!==e())return;const n=this.hideOnMouseLeave;n&&this.Rc()||(0,i.e)((()=>{s()||this.listen("pointermove",this.Ae.bind(this))})),n&&(this.listen("mouseenter",this.cg.bind(this)),this.listen("mouseleave",this.dg.bind(this)))}Tc(){const{paused:t,started:e,autoplayError:s}=this.$state;if(t()||s()&&!e())return;const n=this.Ae.bind(this);(0,i.e)((()=>{const t=["coarse"===this.$state.pointer()?"touchend":"pointerup","keydown"];for(const e of t)this.listen(e,n,{passive:!1})}))}xb(t){this.show(0,t),this.hide(void 0,t)}Aa(t){this.show(0,t)}cg(t){this.Rc.set(!1),this.show(0,t),this.hide(void 0,t)}dg(t){this.Rc.set(!0),this.hide(0,t)}Sc(){window.clearTimeout(this.Qc),this.Qc=-1}Ae(t){t.MEDIA_GESTURE||this.Xa||(0,a.i)(t)||((0,i.G)(t)&&("Escape"===t.key?(this.el?.focus(),this.wb=null):this.wb&&(t.preventDefault(),requestAnimationFrame((()=>{this.wb?.focus(),this.wb=null})))),this.show(0,t),this.hide(this.defaultDelay,t))}bc(t,e,s){0!==e?this.Qc=window.setTimeout((()=>{this.scope&&this.B(t&&!this.Xa,s)}),e):this.B(t,s)}B(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.wb=document.activeElement,requestAnimationFrame((()=>this.el?.focus()))),this.dispatch("controls-change",{detail:t,trigger:e}))}}class P{constructor(){this.priority=0,this.Be=!0,this.m=null,this.z=null,this.yb=new Set}canRender(t,e){return!!e}attach(t){this.m=t,t&&(t.textTracks.onchange=this.B.bind(this))}addTrack(t){this.yb.add(t),this.eg(t)}removeTrack(t){t[r.T.T]?.remove?.(),t[r.T.T]=null,this.yb.delete(t)}changeTrack(t){const e=t?.[r.T.T];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),this.z=t}setDisplay(t){this.Be=t,this.B()}detach(){this.m&&(this.m.textTracks.onchange=null);for(const t of this.yb)this.removeTrack(t);this.yb.clear(),this.m=null,this.z=null}eg(t){if(!this.m)return;const e=t[r.T.T]??=this.fg(t);e instanceof HTMLElement&&(this.m.append(e),e.track.mode=e.default?"showing":"hidden")}fg(t){const e=document.createElement("track"),s=t.default||"showing"===t.mode,i=t.src&&"vtt"===t.type;return e.id=t.id,e.src=i?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.Ce(t,e.track),e}Ce(t,e){if(!(t.src&&"vtt"===t.type||e.cues?.length))for(const s of t.cues)e.addCue(s)}B(t){for(const e of this.yb){const s=e[r.T.T]?.track;if(!s)continue;if(!this.Be){s.mode="disabled";continue}const i="showing"===s.mode;i&&this.Ce(e,s),e.setMode(i?"showing":"disabled",t)}}}class S{constructor(t){this.a=t,this.m=null,this.cc=[],this.De=!1,this.ba=null,this.Ba=null;const e=t.textTracks;this.Uc=e,(0,i.e)(this.Vc.bind(this)),(0,i.o)(this.Ee.bind(this)),(0,i.l)(e,"add",this.Wc.bind(this)),(0,i.l)(e,"remove",this.gg.bind(this)),(0,i.l)(e,"mode-change",this.ea.bind(this))}Vc(){const{$state:t,$iosControls:e}=this.a;this.De=t.controls()||e(),this.ea()}add(t){this.cc.push(t),this.ea()}remove(t){t.detach(),this.cc.splice(this.cc.indexOf(t),1),this.ea()}Fe(t){requestAnimationFrame((()=>{if(this.m=t,t){this.ba=new P,this.ba.attach(t);for(const t of this.Uc)this.Ge(t)}this.ea()}))}Ge(t){(0,r.i)(t)&&this.ba?.addTrack(t)}hg(t){(0,r.i)(t)&&this.ba?.removeTrack(t)}Wc(t){this.Ge(t.detail)}gg(t){this.hg(t.detail)}ea(){const t=this.Uc.selected;if(this.m&&(this.De||t?.[r.T.te]))return this.Ba?.changeTrack(null),this.ba?.setDisplay(!0),void this.ba?.changeTrack(t);if(this.ba?.setDisplay(!1),this.ba?.changeTrack(null),!t)return void this.Ba?.changeTrack(null);const e=this.cc.sort(((t,e)=>t.priority-e.priority)).find((e=>e.canRender(t,this.m)));this.Ba!==e&&(this.Ba?.detach(),e?.attach(this.m),this.Ba=e??null),e?.changeTrack(t)}Ee(){this.ba?.detach(),this.ba=null,this.Ba?.detach(),this.Ba=null}}class E extends n.L{constructor(){super(...arguments),this.P=!1,this.dc={},this.Je=this.ig.bind(this)}get selected(){return this.r.find((t=>"showing"===t.mode&&(0,r.i)(t)))??null}add(t,e){const s=t instanceof r.b?t:new r.b(t);return this.dc[t.kind]&&t.default&&delete t.default,s.addEventListener("mode-change",this.Je),this[h.L.oa](s,e),s[r.T.Sa]=this[r.T.Sa],this.P&&s[r.T.P](),t.default&&(this.dc[t.kind]=s,s.mode="showing"),this}remove(t,e){if(this.r.includes(t))return t===this.dc[t.kind]&&delete this.dc[t.kind],t.mode="disabled",t[r.T.Ua]=null,t.removeEventListener("mode-change",this.Je),this[h.L.Yb](t,e),this}clear(t){for(const e of[...this.r])this.remove(e,t);return this}getById(t){return this.r.find((e=>e.id===t))??null}getByKind(t){const e=Array.isArray(t)?t:[t];return this.r.filter((t=>e.includes(t.kind)))}[r.T.P](){if(!this.P){for(const t of this.r)t[r.T.P]();this.P=!0}}ig(t){const e=t.detail;if("showing"===e.mode){const t=(0,r.i)(e)?["captions","subtitles"]:[e.kind];for(const s of this.r)"showing"===s.mode&&s!=e&&t.includes(s.kind)&&(s.mode="disabled")}this.dispatchEvent(new i.D("mode-change",{detail:t.detail,trigger:t}))}}const A=Symbol(0);class j extends n.L{get selected(){return this.r.find((t=>t.selected))??null}get selectedIndex(){return this.r.findIndex((t=>t.selected))}[h.L.oe](t,e){this[h.L.pa](t,!1,e)}[h.L.oa](t,e){t[A]=!1,Object.defineProperty(t,"selected",{get(){return this[A]},set:e=>{this.readonly||(this[h.L.pe]?.(),this[h.L.pa](t,e))}}),super[h.L.oa](t,e)}[h.L.pa](t,e,s){if(e===t?.[A])return;const n=this.selected;t&&(t[A]=e),(e?n!==t:n===t)&&(n&&(n[A]=!1),this.dispatchEvent(new i.D("change",{detail:{prev:n,current:this.selected},trigger:s})))}}class L extends j{getById(t){return""===t?null:this.r.find((e=>e.id===t))??null}}class C extends j{constructor(){super(...arguments),this.fc=!1,this.switch="current"}get auto(){return this.fc||this.readonly}[h.L.pe](){this[o.Q.Ya](!1)}[h.L.ne](t){this[o.Q.Ya](!1,t)}autoSelect(t){this.readonly||this.fc||!this[o.Q.Za]||(this[o.Q.Za]?.(),this[o.Q.Ya](!0,t))}[o.Q.Ya](t,e){this.fc!==t&&(this.fc=t,this.dispatchEvent(new i.D("auto-change",{detail:t,trigger:e})))}}const O=new Set(["Shift","Alt","Meta","Control"]),M='input, textarea, select, [contenteditable], [role^="menuitem"]';class q extends x{constructor(t){super(),this.a=t,this._a=null}onConnect(){(0,i.e)(this.mg.bind(this))}mg(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s="player"===e()?this.el:document,n=(0,i.m)(!1);s===this.el?(this.listen("focusin",(()=>n.set(!0))),this.listen("focusout",(t=>{this.el.contains(t.target)||n.set(!1)}))):((0,i.p)(n)||n.set(document.querySelector("[data-media-player]")===this.el),(0,i.l)(document,"focusin",(t=>{const e=t.composedPath().find((t=>t instanceof Element&&"media-player"===t.localName));void 0!==e&&n.set(this.el===e)}))),(0,i.e)((()=>{n()&&((0,i.l)(s,"keyup",this.zb.bind(this)),(0,i.l)(s,"keydown",this.Ab.bind(this)),(0,i.l)(s,"keydown",this.ng.bind(this),{capture:!0}))}))}zb(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(M))return;let{method:s,value:n}=this.Zc(t);if((0,i.r)(n)||(0,i.w)(n)){if(s?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this._a?(this.Ne(t,"seekForward"===s),this._a=null):(this.a.remote.seek(this.gc,t),this.gc=void 0)),s?.startsWith("volume")){const e=this.el.querySelector("[data-media-volume-slider]");e?.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===s?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}else n?.callback(t)}Ab(t){if(!t.key||O.has(t.key))return;const e=document.activeElement;if(e?.matches(M)||(0,i.b)(t)&&e?.matches('button, [role="button"]'))return;let{method:s,value:n}=this.Zc(t);if((0,i.r)(n)||(0,i.w)(n)){if(!s&&!t.metaKey&&/[0-9]/.test(t.key))return t.preventDefault(),t.stopPropagation(),void this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);if(s)switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.qa(t,s,"seekForward"===s);break;case"volumeUp":case"volumeDown":const e=this.el.querySelector("[data-media-volume-slider]");if(e)e.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===s?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const e=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+("volumeUp"===s?+e:-e),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const i=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,i+("speedUp"===s?.25:-.25))),t);break;default:this.a.remote[s]?.(t)}}else n?.callback(t)}ng(t){var e;(function(t){return t instanceof HTMLAudioElement}(e=t.target)||function(t){return t instanceof HTMLVideoElement}(e))&&this.Zc(t).method&&t.preventDefault()}Zc(t){const e={...this.$props.keyShortcuts(),...this.a.ariaKeys},s=Object.keys(e).find((s=>{const n=e[s],r=(0,i.w)(n)?n.join(" "):(0,i.r)(n)?n:n?.keys;return((0,i.w)(r)?r:r?.split(" "))?.some((e=>function(t){return t.replace(/Shift\+(\d)/g,((t,e)=>D[e-1]))}(e).replace(/Control/g,"Ctrl").split("+").every((e=>O.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," ")))))}));return{method:s,value:s?e[s]:null}}og(t,e){const s=t.shiftKey?10:5;return this.gc=Math.max(0,Math.min((this.gc??this.$state.currentTime())+("seekForward"===e?+s:-s),this.$state.duration()))}Ne(t,e){this._a?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}qa(t,e,s){this.$state.canSeek()&&(this._a||(this._a=this.el.querySelector("[data-media-time-slider]")),this._a?this.Ne(t,s):this.a.remote.seeking(this.og(t,e),t))}}const D=["!","@","#","$","%","^","&","*","(",")"];class I extends i.X{constructor(t){super(),this._c=t}onAttach(t){const{$props:e,ariaKeys:s}=(0,n.u)(),r=t.getAttribute("aria-keyshortcuts");if(r)return s[this._c]=r,void(0,i.o)((()=>{delete s[this._c]}));const a=e.keyShortcuts()[this._c];if(a){const e=(0,i.w)(a)?a.join(" "):(0,i.r)(a)?a:a?.keys;t.setAttribute("aria-keyshortcuts",(0,i.w)(e)?e.join(" "):e)}}}class F{canPlay({src:t,type:e}){return(0,i.r)(t)?c.A.test(t)||c.b.has(e)||t.startsWith("blob:")&&"audio/object"===e:"audio/object"===e}mediaType(){return"audio"}async load(){return new((await s.e(6180).then(s.bind(s,6180))).AudioProvider)(this.target)}}class R{canPlay(t){return(0,i.r)(t.src)?c.V.test(t.src)||c.c.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||(0,c.i)(t)&&(0,h.b)():"video/object"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(1984).then(s.bind(s,9604))).VideoProvider)(this.target,t)}}class N{canPlay(t){return(0,i.r)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(1868).then(s.bind(s,9488))).YouTubeProvider)(this.target)}}class V extends R{static{this.supported=(0,h.i)()}canPlay(t){return V.supported&&(0,c.i)(t)}async load(t){return new((await s.e(6128).then(s.bind(s,6128))).HLSProvider)(this.target,t)}}class H{canPlay(t){return(0,i.r)(t.src)&&"video/vimeo"===t.type}mediaType(){return"video"}async load(t){return new((await s.e(552).then(s.bind(s,552))).VimeoProvider)(this.target)}}const W=Symbol(0),K=["autoplay","canFullscreen","canPictureInPicture","canLoad","canPlay","canSeek","ended","fullscreen","loop","live","liveEdge","mediaType","muted","paused","pictureInPicture","playing","playsinline","seeking","started","streamType","viewType","waiting"],Q={autoplay:!1,controls:!1,currentTime:0,crossorigin:null,fullscreenOrientation:"landscape",load:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:{togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"}};class z extends x{constructor(t){super(),this.Ca=t}async onAttach(t){const e=this.$props.load();if("eager"===e)requestAnimationFrame(this.Ca);else if("idle"===e)(0,i.Y)(this.Ca);else if("visible"===e){const e=new IntersectionObserver((t=>{this.scope&&t[0].isIntersecting&&(e.disconnect(),this.Ca())}));return e.observe(t),e.disconnect.bind(e)}}}class B{constructor(t,e){this.X=t,this.a=e,this.c=(t,...e)=>{this.X(new i.D(t,{detail:e?.[0],trigger:e?.[1]}))}}async jc(t,e){const{$state:s,logger:n}=this.a;if((0,i.p)(s.canPlay))return;const r={duration:t?.duration??(0,i.p)(s.duration),seekable:t?.seekable??(0,i.p)(s.seekable),buffered:t?.buffered??(0,i.p)(s.buffered),provider:(0,i.p)(this.a.$provider)};this.c("can-play",r,e),(0,i.P)();const a=(0,i.p)(this.a.$provider),{muted:h,volume:o,playsinline:c}=this.a.$props;a&&(a.setVolume((0,i.p)(o)),a.setMuted((0,i.p)(h)),a.setPlaysinline?.((0,i.p)(c))),s.canPlay()&&s.autoplay()&&!s.started()&&await this.oh(e)}async oh(t){const{player:e,$state:s}=this.a;s.autoplaying.set(!0);const n=new i.D("autoplay-attempt",{trigger:t});try{await e.play(n)}catch(t){}}}class J{constructor(){this.e=new Map}k(t,e){this.e.has(t)||this.e.set(t,new Set),this.e.get(t).add(e)}td(t,e){const s=this.e.get(t);if(s)for(const t of s)e(t);this.e.delete(t)}qc(t){this.e.delete(t)}ph(t){return this.e.get(t)?.size??0}H(){this.e.clear()}}class X{constructor(){this.Mb=!1,this.Ed=(0,i.v)(),this.e=new Map}get ph(){return this.e.size}get Rj(){return this.Mb}async Sj(){this.Mb||await this.Ed.promise}k(t,e){this.Mb?e():(this.e.delete(t),this.e.set(t,e))}td(t){this.e.get(t)?.(),this.e.delete(t)}Bb(){this.jf(),this.Mb=!0,this.e.size>0&&this.jf()}ra(){this.Mb=!1}H(){this.ra(),this.e.clear(),this.kf()}jf(){for(const t of this.e.keys())this.td(t);this.kf()}kf(){this.Ed.resolve(),this.Ed=(0,i.v)()}}class U extends x{constructor(t,e,s){super(),this.ga=t,this.f=e,this.a=s,this.vk=new X,this.vd=!1,this.uk=s.$provider,this.Ib=new T,this.rc=new y,this.ta=new w}onAttach(){this.listen("fullscreen-change",this.Oc.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.qh.bind(this);for(const s of t)s.startsWith("media-")&&this.listen(s,e);(0,i.e)(this.wk.bind(this)),(0,i.e)(this.rh.bind(this)),(0,i.e)(this.sh.bind(this)),(0,i.e)(this.th.bind(this))}onDestroy(){this.vk.H()}wk(){const t=this.uk(),e=this.$state.canPlay();return t&&e&&this.vk.Bb(),()=>{this.vk.ra()}}qh(t){t.stopPropagation(),this[t.type]&&((0,i.p)(this.uk)?this[t.type](t):this.vk.k(t.type,(()=>{(0,i.p)(this.uk)&&this[t.type](t)})))}async sc(t){const{canPlay:e,paused:s,ended:n,autoplaying:r,seekableStart:a}=this.$state;if((0,i.p)(s)){"media-play-request"===t?.type&&this.f.e.k("play",t);try{const t=(0,i.p)(this.uk);return Z(t,(0,i.p)(e)),(0,i.p)(n)&&t.setCurrentTime(a()+.1),await t.play()}catch(e){const s=this.createEvent("play-fail",{detail:(0,o.c)(e),trigger:t});throw s.autoplay=r(),this.ga.X(s),e}}}async ud(t){const{canPlay:e,paused:s}=this.$state;if((0,i.p)(s))return;"media-pause-request"===t?.type&&this.f.e.k("pause",t);const n=(0,i.p)(this.uk);return Z(n,(0,i.p)(e)),n.pause()}Ze(t){const{canPlay:e,live:s,liveEdge:n,canSeek:r,liveSyncPosition:a,seekableEnd:h,userBehindLiveEdge:o}=this.$state;if(o.set(!1),(0,i.p)((()=>!s()||n()||!r())))return;const c=(0,i.p)(this.uk);Z(c,(0,i.p)(e)),c.setCurrentTime(a()??h()-2)}async _e(t="prefer-media",e){const s=this.$e(t);if(_(0,s),!s.active)return(0,i.p)(this.$state.pictureInPicture)&&(this.vd=!0,await this.wd(e)),"media-enter-fullscreen-request"===e?.type&&this.f.e.k("fullscreen",e),s.enter()}async af(t="prefer-media",e){const s=this.$e(t);if(_(0,s),s.active){"media-exit-fullscreen-request"===e?.type&&this.f.e.k("fullscreen",e);try{const t=await s.exit();return this.vd&&(0,i.p)(this.$state.canPictureInPicture)&&await this.xd(),t}finally{this.vd=!1}}}$e(t){const e=(0,i.p)(this.uk);return"prefer-media"===t&&this.rc.supported||"media"===t?this.rc:e?.fullscreen}async xd(t){if(this.bf(),!this.$state.pictureInPicture())return"media-enter-pip-request"===t?.type&&this.f.e.k("pip",t),await this.uk().pictureInPicture.enter()}async wd(t){if(this.bf(),this.$state.pictureInPicture())return"media-exit-pip-request"===t?.type&&this.f.e.k("pip",t),await this.uk().pictureInPicture.exit()}bf(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}rh(){this.Ib.defaultDelay=this.$props.controlsDelay()}sh(){const{canLoad:t,canFullscreen:e}=this.$state,s=this.rc.supported||this.uk()?.fullscreen?.supported||!1;t()&&(0,i.p)(e)===s||e.set(s)}th(){const{canLoad:t,canPictureInPicture:e}=this.$state,s=this.uk()?.pictureInPicture?.supported||!1;t()&&(0,i.p)(e)===s||e.set(s)}"media-audio-track-change-request"(t){if(this.a.audioTracks.readonly)return;const e=t.detail,s=this.a.audioTracks[e];s&&(this.f.e.k("audioTrack",t),s.selected=!0)}async"media-enter-fullscreen-request"(t){try{await this._e(t.detail,t)}catch(e){this._b(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.af(t.detail,t)}catch(e){this._b(e,t)}}async Oc(t){const e=(0,i.p)(this.$props.fullscreenOrientation),s=t.detail;if(!(0,i.i)(e)&&this.ta.supported)if(s){if(this.ta.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.ta.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}_b(t,e){this.ga.X(this.createEvent("fullscreen-error",{detail:(0,o.c)(t)}))}async"media-orientation-lock-request"(t){try{this.f.e.k("orientation",t),await this.ta.lock(t.detail)}catch(t){this.f.e.qc("orientation")}}async"media-orientation-unlock-request"(t){try{this.f.e.k("orientation",t),await this.ta.unlock()}catch(t){this.f.e.qc("orientation")}}async"media-enter-pip-request"(t){try{await this.xd(t)}catch(e){this.cf(e,t)}}async"media-exit-pip-request"(t){try{await this.wd(t)}catch(e){this.cf(e,t)}}cf(t,e){this.ga.X(this.createEvent("picture-in-picture-error",{detail:(0,o.c)(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(e()&&!s()&&i()){this.f.e.k("seeked",t);try{this.Ze()}catch(t){}}}async"media-loop-request"(t){try{this.f.Ha=!0,this.f.gb=!0,await this.sc(t)}catch(t){this.f.Ha=!1,this.f.gb=!1}}async"media-pause-request"(t){if(!this.$state.paused())try{await this.ud(t)}catch(t){this.f.e.qc("pause")}}async"media-play-request"(t){if(this.$state.paused())try{await this.sc(t)}catch(t){}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const i=this.uk();i?.setPlaybackRate&&(this.f.e.k("rate",t),i.setPlaybackRate(t.detail))}"media-quality-change-request"(t){if(this.a.qualities.readonly)return;this.f.e.k("quality",t);const e=t.detail;if(e<0)this.a.qualities.autoSelect(t);else{const t=this.a.qualities[e];t&&(t.selected=!0)}}"media-pause-controls-request"(t){this.f.e.k("controls",t),this.Ib.pause(t)}"media-resume-controls-request"(t){this.f.e.k("controls",t),this.Ib.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:s,ended:i,canSeek:n,live:r,userBehindLiveEdge:a}=this.$state;i()&&(this.f.gb=!0),this.f.qa=!1,this.f.e.qc("seeking");const h=Math.min(Math.max(e()+.1,t.detail),s()-.1);Number.isFinite(h)&&n()&&(this.f.e.k("seeked",t),this.uk().setCurrentTime(h),r()&&t.isOriginTrusted&&Math.abs(s()-h)>=2&&a.set(!0))}"media-seeking-request"(t){this.f.e.k("seeking",t),this.$state.seeking.set(!0),this.f.qa=!0}"media-start-loading"(t){this.$state.canLoad()||(this.f.e.k("load",t),this.ga.X(this.createEvent("can-load")))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.a.textTracks[e];i&&(this.f.e.k("textTrack",t),i.setMode(s,t))}"media-mute-request"(t){this.$state.muted()||(this.f.e.k("volume",t),this.uk().setMuted(!0))}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;e()&&(this.f.e.k("volume",t),this.a.$provider().setMuted(!1),0===s()&&(this.f.e.k("volume",t),this.uk().setVolume(.25)))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;s()!==i&&(this.f.e.k("volume",t),this.uk().setVolume(i),i>0&&e()&&(this.f.e.k("volume",t),this.uk().setMuted(!1)))}}function Z(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function _(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}class Y{constructor(){this.qa=!1,this.Ha=!1,this.gb=!1,this.e=new J}}var G=function(t,e,s){var i=null,n=null,r=function(){i&&(clearTimeout(i),n=null,i=null)},a=function(){if(!e)return t.apply(this,arguments);var a=this,h=arguments,o=s&&!i;return r(),n=function(){t.apply(a,h)},i=setTimeout((function(){if(i=null,!o){var t=n;return n=null,t()}}),e),o?n():void 0};return a.cancel=r,a.flush=function(){var t=n;r(),t&&t()},a},tt=function(t,e,s){var i=null,n=null,r=s&&s.leading,a=s&&s.trailing;null==r&&(r=!0),null==a&&(a=!r),1==r&&(a=!1);var h=function(){i&&(clearTimeout(i),i=null)},o=function(){var s=r&&!i,h=this,o=arguments;if(n=function(){return t.apply(h,o)},i||(i=setTimeout((function(){if(i=null,a)return n()}),e)),s)return s=!1,n()};return o.cancel=h,o.flush=function(){var t=n;h(),t&&t()},o};const et=new Set(["autoplay","autoplay-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class st extends x{constructor(t,e){super(),this.f=t,this.a=e,this.p=new Map,this.tc=!1,this.Jb=!1,this.seeking=tt((t=>{const{seeking:e,currentTime:s,paused:i}=this.$state;e.set(!0),s.set(t.detail),this.F("seeking",t),i()&&(this.hb=t,this.zd())}),150,{leading:!0}),this.zd=G((()=>{if(!this.hb)return;this.tc=!0;const{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);const s=this.createEvent("waiting",{trigger:this.hb});this.p.set("waiting",s),this.dispatch(s),this.hb=void 0,this.tc=!1}),300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){this.uh(),this.vh(),this.wh(),this.xh(),(0,i.o)(this.yh.bind(this))}X(t){if(!this.scope)return;const e=t.type;this[t.type]?.(t),et.has(e)&&this.p.set(e,t),this.dispatch(t)}xh(){this.Jb&&(this.a.$provider()?.paused&&requestAnimationFrame((()=>{this.scope&&this.a.remote.play(new i.D("dom-connect"))})),this.Jb=!1)}yh(){this.Jb||(this.Jb=!this.a.$state.paused(),this.a.$provider()?.pause())}ib(){this.df(),this.f.gb=!1,this.f.Ha=!1,this.tc=!1,this.hb=void 0,this.p.clear()}F(t,e){this.f.e.td(t,(t=>{e.request=t,e.triggers.add(t)}))}uh(){this.yd(),this.ef();const t=this.a.textTracks;(0,i.l)(t,"add",this.yd.bind(this)),(0,i.l)(t,"remove",this.yd.bind(this)),(0,i.l)(t,"mode-change",this.ef.bind(this))}vh(){const t=this.a.qualities;(0,i.l)(t,"add",this.pc.bind(this)),(0,i.l)(t,"remove",this.pc.bind(this)),(0,i.l)(t,"change",this.fb.bind(this)),(0,i.l)(t,"auto-change",this.zh.bind(this)),(0,i.l)(t,"readonly-change",this.Ah.bind(this))}wh(){const t=this.a.audioTracks;(0,i.l)(t,"add",this.ff.bind(this)),(0,i.l)(t,"remove",this.ff.bind(this)),(0,i.l)(t,"change",this.Bh.bind(this))}yd(t){const{textTracks:e}=this.$state;e.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}ef(t){t&&this.F("textTrack",t);const e=this.a.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}ff(t){const{audioTracks:e}=this.$state;e.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Bh(t){const{audioTrack:e}=this.$state;e.set(this.a.audioTracks.selected),this.F("audioTrack",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}pc(t){const{qualities:e}=this.$state;e.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}fb(t){const{quality:e}=this.$state;e.set(this.a.qualities.selected),this.F("quality",t),this.dispatch("quality-change",{detail:e(),trigger:t})}zh(){this.$state.autoQuality.set(this.a.qualities.auto)}Ah(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}"provider-change"(t){const e=this.a.$provider(),s=t.detail;e?.type!==s?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.a.$provider.set(t.detail),e&&null===t.detail&&this.gf(t))}"provider-loader-change"(t){}autoplay(t){this.$state.autoplayError.set(null)}"autoplay-fail"(t){this.$state.autoplayError.set(t.detail),this.ib()}"can-load"(t){this.$state.canLoad.set(!0),this.p.set("can-load",t),this.F("load",t),this.a.textTracks[r.T.P]()}"media-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const i=this.$state.providedViewType(),n="unknown"===i?t.detail:i;s!==n&&setTimeout((()=>{requestAnimationFrame((()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:n,trigger:t}))}))}),0)}"stream-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:i}=this.$state;i.set(t.detail),t.detail=s()}"rate-change"(t){this.$state.playbackRate.set(t.detail),this.F("rate",t)}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){const e=this.p.get("sources-change");e&&t.triggers.add(e),this.gf(t),this.p.set(t.type,t),this.$state.source.set(t.detail),this.el?.setAttribute("aria-busy","true")}gf(t){this.a.audioTracks[h.L.H](t),this.a.qualities[h.L.H](t),this.ib(),(0,n.s)(this.a.$state)}abort(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.p.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.p.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.p.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"can-play"(t){const e=this.p.get("loaded-metadata");e&&t.triggers.add(e),this.hf(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.hf(t.detail);const e=this.p.get("can-play");e&&t.triggers.add(e)}hf(t){const{seekable:e,seekableEnd:s,buffered:i,duration:n,canPlay:r}=this.$state;r.set(!0),i.set(t.buffered),e.set(t.seekable),n.set(s())}"duration-change"(t){const{live:e,duration:s}=this.$state,i=t.detail;e()||s.set(Number.isNaN(i)?0:i)}progress(t){const{buffered:e,seekable:s,live:i,duration:n,seekableEnd:r}=this.$state,a=t.detail;e.set(a.buffered),s.set(a.seekable),i()&&(n.set(r),this.dispatch("duration-change",{detail:r(),trigger:t}))}play(t){const{paused:e,autoplayError:s,ended:i,autoplaying:n,playsinline:r,pointer:a,muted:h,viewType:o}=this.$state;if(t.autoplay=n(),this.f.Ha||!e())return void t.stopImmediatePropagation();const c=this.p.get("waiting");c&&t.triggers.add(c),this.F("play",t),this.p.set("play",t),e.set(!1),s.set(null),t.autoplay&&(this.X(this.createEvent("autoplay",{detail:{muted:h()},trigger:t})),n.set(!1)),(i()||this.f.gb)&&(this.f.gb=!1,i.set(!1),this.X(this.createEvent("replay",{trigger:t}))),r()||"video"!==o()||"coarse"!==a()||this.a.remote.enterFullscreen("prefer-media",t)}"play-fail"(t){const{muted:e,autoplaying:s}=this.$state,i=this.p.get("play");i&&t.triggers.add(i),this.F("play",t);const{paused:n,playing:r}=this.$state;n.set(!0),r.set(!1),this.ib(),this.p.set("play-fail",t),t.autoplay&&(this.X(this.createEvent("autoplay-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.p.get("play"),s=this.p.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout((()=>this.ib()),0);const{paused:i,playing:n,live:r,liveSyncPosition:a,seekableEnd:h,started:o,currentTime:c,seeking:l,ended:u}=this.$state;if(i.set(!1),n.set(!0),l.set(!1),u.set(!1),this.f.Ha)return t.stopImmediatePropagation(),void(this.f.Ha=!1);if(r()&&!o()&&0===c()){const t=a()??h()-2;Number.isFinite(t)&&this.a.$provider().setCurrentTime(t)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.X(this.createEvent("started",{trigger:t})))}pause(t){if(this.el?.isConnected||(this.Jb=!0),this.f.Ha)return void t.stopImmediatePropagation();const e=this.p.get("seeked");e&&t.triggers.add(e),this.F("pause",t);const{paused:s,playing:i}=this.$state;s.set(!0),i.set(!1),this.ib()}"time-update"(t){const{currentTime:e,played:s,waiting:i}=this.$state,n=t.detail;e.set(n.currentTime),s.set(n.played),i.set(!1);for(const e of this.a.textTracks)e[r.T.Ta](n.currentTime,t)}"volume-change"(t){const{volume:e,muted:s}=this.$state,i=t.detail;e.set(i.volume),s.set(i.muted||0===i.volume),this.F("volume",t)}seeked(t){const{seeking:e,currentTime:s,paused:i,duration:n,ended:r}=this.$state;if(this.f.qa)e.set(!0),t.stopImmediatePropagation();else if(e()){const a=this.p.get("waiting");a&&t.triggers.add(a);const h=this.p.get("seeking");h&&!t.triggers.has(h)&&t.triggers.add(h),i()&&this.df(),e.set(!1),t.detail!==n()&&r.set(!1),s.set(t.detail),this.F("seeked",t);const o=t?.originEvent;o?.isTrusted&&!/seek/.test(o.type)&&this.started(t)}}waiting(t){this.tc||this.f.qa||(t.stopImmediatePropagation(),this.hb=t,this.zd())}end(t){const{loop:e}=this.$state;e()?setTimeout((()=>{requestAnimationFrame((()=>{this.dispatch("media-loop-request",{trigger:t})}))}),0):this.Db(t)}Db(t){const{paused:e,seeking:s,ended:i,duration:n}=this.$state;e()||this.dispatch("pause",{trigger:t}),s()&&this.dispatch("seeked",{detail:n(),trigger:t}),i.set(!0),this.ib(),this.dispatch("ended",{trigger:t})}df(){this.zd.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){this.$state.fullscreen.set(t.detail),this.F("fullscreen",t)}"fullscreen-error"(t){this.F("fullscreen",t)}"orientation-change"(t){this.F("orientation",t)}"picture-in-picture-change"(t){this.$state.pictureInPicture.set(t.detail),this.F("pip",t)}"picture-in-picture-error"(t){this.F("pip",t)}"title-change"(t){t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail)}"poster-change"(t){t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail)}}class it extends x{onSetup(){this.Ch(),(0,i.e)(this.Eh.bind(this)),(0,i.e)(this.uc.bind(this)),(0,i.e)(this.Fh.bind(this)),(0,i.e)(this.ld.bind(this)),(0,i.e)(this.Gh.bind(this)),(0,i.e)(this.Vc.bind(this)),(0,i.e)(this.Hh.bind(this)),(0,i.e)(this.Ad.bind(this)),(0,i.e)(this.Ih.bind(this)),(0,i.e)(this.Jh.bind(this)),(0,i.e)(this.Kh.bind(this))}Ch(){const t={poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"};for(const e of Object.keys(this.$props))this.$state[t[e]??e]?.set(this.$props[e]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}Eh(){const{viewType:t,streamType:e,title:s,poster:i}=this.$props;this.$state.providedPoster.set(i()),this.$state.providedStreamType.set(e()),this.$state.providedViewType.set(t()),this.$state.providedTitle.set(s())}Dh(){}uc(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Fh(){const t=this.$props.autoplay();this.$state.autoplay.set(t),this.dispatch("autoplay-change",{detail:t})}Gh(){const t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Vc(){const t=this.$props.controls();this.$state.controls.set(t)}ld(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Hh(){const t=this.$props.crossorigin();this.$state.crossorigin.set(!0===t?"":t)}Ad(){const t=this.$props.playsinline();this.$state.playsinline.set(t),this.dispatch("playsinline-change",{detail:t})}Jh(){this.dispatch("live-change",{detail:this.$state.live()})}Ih(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Kh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}let nt=(0,i.m)(!1);(0,i.l)(document,"pointerdown",(()=>{nt.set(!1)})),(0,i.l)(document,"keydown",(t=>{t.metaKey||t.altKey||t.ctrlKey||nt.set(!0)}));class rt extends i.X{constructor(){super(...arguments),this.Kb=(0,i.m)(!1)}onConnect(t){(0,i.e)((()=>{if(!nt())return this.Kb.set(!1),at(t,!1),this.listen("pointerenter",this.Cd.bind(this)),void this.listen("pointerleave",this.Dd.bind(this));const e=document.activeElement===t;this.Kb.set(e),at(t,e),this.listen("focus",this.Lb.bind(this)),this.listen("blur",this.Nh.bind(this))}))}focused(){return this.Kb()}Lb(){this.Kb.set(!0),at(this.el,!0)}Nh(){this.Kb.set(!1),at(this.el,!1)}Cd(){ht(this.el,!0)}Dd(){ht(this.el,!1)}}function at(t,e){(0,i.k)(t,"data-focus",e),(0,i.k)(t,"data-hocus",e)}function ht(t,e){(0,i.k)(t,"data-hocus",e),(0,i.k)(t,"data-hover",e)}var ot=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,lt=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?ct(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&ot(e,s,r),r};const ut=class t extends i.I{constructor(){super(),this.canPlayQueue=new X,this.wc=!1,new it;const t={player:this,scope:(0,i.g)(),qualities:new C,audioTracks:new L,$provider:(0,i.m)(null),$providerSetup:(0,i.m)(!1),$props:this.$props,$state:this.$state};t.remote=new k(void 0),t.remote.setPlayer(this),t.$iosControls=(0,i.n)(this.Oh.bind(this)),t.textTracks=new E,t.textTracks[r.T.Sa]=this.$state.crossorigin,t.textRenderers=new S(t),t.ariaKeys={},this.a=t,(0,i.Z)(n.m,t),this.orientation=new w,new rt,new q(t);const e=new Y;this.ga=new st(e,t),this.Y=new U(this.ga,e,t),t.delegate=new B(this.ga.X.bind(this.ga),t),new z(this.startLoading.bind(this))}static{this.props=Q}static{this.state=n.a}get i(){return this.a.$provider()}onSetup(){this.Ph(),(0,i.e)(this.Qh.bind(this)),(0,i.e)(this.Rh.bind(this)),(0,i.e)(this.Tc.bind(this)),(0,i.e)(this.Fd.bind(this)),(0,i.e)(this.jb.bind(this)),(0,i.e)(this.Ad.bind(this)),(0,i.e)(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),(0,a.s)(t,"tabindex","0"),(0,a.s)(t,"role","region"),(0,i.e)(this.uc.bind(this)),(0,i.e)(this.lf.bind(this)),(0,i.l)(t,"find-media-player",this.Th.bind(this))}onConnect(t){h.h&&(0,i.k)(t,"data-iphone",""),(0,h.c)().then(this.$state.canSetVolume.set);const e=window.matchMedia("(pointer: coarse)");this.mf(e),e.onchange=this.mf.bind(this);const s=new ResizeObserver((0,i.V)(this.O.bind(this)));s.observe(t),(0,i.e)(this.O.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,i.o)((()=>{s.disconnect(),e.onchange=null}))}onDestroy(){this.a.player=null,this.canPlayQueue.H()}uc(){if(this.wc)return void(this.wc=!1);const{title:t,live:e,viewType:s}=this.$state,n=e(),r=(0,i._)(s()),a="Unknown"!==r?`${n?"Live ":""}${r}`:n?"Live":"Media",h=t();(0,i.k)(this.el,"aria-label",h?`${a} - ${h}`:a+" Player"),this.el&&customElements.get(this.el.localName)&&(this.wc=!0),this.el?.removeAttribute("title")}lf(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,i.k)(this.el,"data-orientation",t),this.O()}Qh(){this.$state.canPlay()&&this.i?this.canPlayQueue.Bb():this.canPlayQueue.ra()}Ph(){if(t[W])return void this.setAttributes(t[W]);const e={"data-captions":function(){const t=this.$state.textTrack();return!!t&&(0,r.i)(t)},"data-ios-controls":function(){return this.a.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canPlay:t,waiting:e}=this.$state;return!t()||e()},"data-error":function(){const{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){const{autoplayError:t}=this.$state;return!!t()}},s={canPictureInPicture:"can-pip",pictureInPicture:"pip"};for(const t of K)e["data-"+(s[t]??(0,i.K)(t))]=function(){return this.$state[t]()};delete e.title,t[W]=e,this.setAttributes(e)}Th(t){t.detail(this)}O(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,i.f)(this.el,"--player-width",t+"px"),(0,i.f)(this.el,"--player-height",e+"px")}mf(t){const e=t.matches?"coarse":"fine";(0,i.k)(this.el,"data-pointer",e),this.$state.pointer.set(e),this.O()}Oh(){const{playsinline:t,fullscreen:e}=this.$state;return h.h&&!m&&"video"===this.$state.mediaType()&&(!t()||e())}get provider(){return this.i}get controls(){return this.Y.Ib}get title(){return(0,i.p)(this.$state.providedTitle)}set title(t){this.wc||this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get paused(){return(0,i.p)(this.$state.paused)}set paused(t){this.nf(t)}Tc(){this.nf(this.$props.paused())}nf(t){t?this.canPlayQueue.k("paused",(()=>this.Y.ud())):this.canPlayQueue.k("paused",(()=>this.Y.sc()))}get muted(){return(0,i.p)(this.$state.muted)}set muted(t){this.$props.muted.set(t)}Rh(){this.Uh(this.$props.muted())}Uh(t){this.canPlayQueue.k("muted",(()=>{this.i&&this.i.setMuted(t)}))}get currentTime(){return(0,i.p)(this.$state.currentTime)}set currentTime(t){this.of(t)}jb(){this.of(this.$props.currentTime())}of(t){this.canPlayQueue.k("currentTime",(()=>{t!==(0,i.p)(this.$state.currentTime)&&(0,i.p)((()=>{if(!this.i)return;const e=Math.min(Math.max(this.$state.seekableStart()+.1,t),this.$state.seekableEnd()-.1);Number.isFinite(e)&&this.i.setCurrentTime(e)}))}))}get volume(){return(0,i.p)(this.$state.volume)}set volume(t){this.$props.volume.set(t)}Fd(){this.Vh(this.$props.volume())}Vh(t){const e=(0,c.d)(0,t,1);this.canPlayQueue.k("volume",(()=>{this.i&&this.i.setVolume(e)}))}get playbackRate(){return(0,i.p)(this.$state.playbackRate)}set playbackRate(t){this.pf(t)}Sh(){this.pf(this.$props.playbackRate())}pf(t){this.canPlayQueue.k("rate",(()=>{this.i&&this.i.setPlaybackRate?.(t)}))}Ad(){this.Wh(this.$props.playsinline())}Wh(t){this.canPlayQueue.k("playsinline",(()=>{this.i&&this.i.setPlaysinline?.(t)}))}async play(t){return this.Y.sc(t)}async pause(t){return this.Y.ud(t)}async enterFullscreen(t,e){return this.Y._e(t,e)}async exitFullscreen(t,e){return this.Y.af(t,e)}enterPictureInPicture(t){return this.Y.xd(t)}exitPictureInPicture(t){return this.Y.wd(t)}seekToLiveEdge(t){this.Y.Ze(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}matchQuery(t){return(0,i.s)((()=>n.P.create(t)),this.scope)}destroy(){this.a.remote.setPlayer(null),this.dispatch("destroy")}};lt([i.$],ut.prototype,"canPlayQueue",2),lt([i.$],ut.prototype,"provider",1),lt([i.$],ut.prototype,"controls",1),lt([i.$],ut.prototype,"orientation",2),lt([i.$],ut.prototype,"title",1),lt([i.$],ut.prototype,"qualities",1),lt([i.$],ut.prototype,"audioTracks",1),lt([i.$],ut.prototype,"textTracks",1),lt([i.$],ut.prototype,"textRenderers",1),lt([i.$],ut.prototype,"paused",1),lt([i.$],ut.prototype,"muted",1),lt([i.$],ut.prototype,"currentTime",1),lt([i.$],ut.prototype,"volume",1),lt([i.$],ut.prototype,"playbackRate",1),lt([i.a0],ut.prototype,"play",1),lt([i.a0],ut.prototype,"pause",1),lt([i.a0],ut.prototype,"enterFullscreen",1),lt([i.a0],ut.prototype,"exitFullscreen",1),lt([i.a0],ut.prototype,"enterPictureInPicture",1),lt([i.a0],ut.prototype,"exitPictureInPicture",1),lt([i.a0],ut.prototype,"seekToLiveEdge",1),lt([i.a0],ut.prototype,"startLoading",1),lt([i.a0],ut.prototype,"matchQuery",1);let dt=ut;function pt(t,e){return fetch(t,e).then((t=>t.text())).then((s=>{const i=function(t){const e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(i)return pt(/^https?:/.test(i)?i:new URL(i,t).href,e);const n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===n&&function(t){const e=t.split("\n");for(const t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){const e=parseFloat(t.split(":")[1]);if(!isNaN(e))return e}return-1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n}))}const ft=new Map;class gt{constructor(t,e,s,n=[]){this.xc=t,this.a=e,this.ha=s,this.Gd=!1;const r=new V,a=new R,h=new F,o=[new N,new H];this.Hd=(0,i.n)((()=>e.$props.preferNativeHLS()?[a,h,r,...o,...n]:[r,a,h,...o,...n]));const{$state:c}=e;c.sources.set(bt(e.$props.src()));for(const t of c.sources()){const e=this.Hd().find((e=>e.canPlay(t)));if(!e)continue;const s=e.mediaType(t);this.a.$state.source.set(t),this.a.$state.mediaType.set(s),this.a.$state.inferredViewType.set(s),this.ha.set(e),this.Gd=!0}}get c(){return this.a.delegate.c}connect(){const t=this.ha();this.Gd&&(this.qf(this.a.$state.source(),t),this.rf(t),this.Gd=!1),(0,i.e)(this.Xh.bind(this)),(0,i.e)(this.Yh.bind(this)),(0,i.e)(this.Zh.bind(this)),(0,i.e)(this._h.bind(this))}Xh(){this.c("sources-change",[...bt(this.a.$props.src()),...this.xc()])}Yh(){const{$state:t}=this.a,e=t.sources(),s=(0,i.p)(t.source),n=this.sf(s,e);if(e[0]?.src&&!n.src&&!n.type){const{crossorigin:s}=t,n=(0,r.g)(s()),a=new AbortController;return Promise.all(e.map((t=>(0,i.r)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:n,signal:a.signal}).then((e=>(t.type=e.headers.get("content-type")||"??",ft.set(t.src,t.type),t))).catch((()=>t)):t))).then((e=>{a.signal.aborted||(this.sf((0,i.p)(t.source),e),(0,i.P)())})),()=>a.abort()}(0,i.P)()}sf(t,e){let s={src:"",type:""},n=null;for(const t of e){const e=(0,i.p)(this.Hd).find((e=>e.canPlay(t)));e&&(s=t,n=e)}return mt(t,s)||this.qf(s,n),n!==(0,i.p)(this.ha)&&this.rf(n),s}qf(t,e){this.c("source-change",t),this.c("media-type-change",e?.mediaType(t)||"unknown")}rf(t){this.a.$providerSetup.set(!1),this.c("provider-change",null),t&&(0,i.p)((()=>t.preconnect?.(this.a))),this.ha.set(t),this.c("provider-loader-change",t)}Zh(){const t=this.a.$provider();if(t&&!(0,i.p)(this.a.$providerSetup))return this.a.$state.canLoad()?((0,i.s)((()=>t.setup(this.a)),t.scope),void this.a.$providerSetup.set(!0)):void(0,i.p)((()=>t.preconnect?.(this.a)))}_h(){if(!this.a.$providerSetup())return;const t=this.a.$provider(),e=this.a.$state.source(),s=(0,i.p)(this.a.$state.crossorigin);if(!mt(t?.currentSrc,e)){if(this.a.$state.canLoad()){const n=new AbortController;return(0,c.i)(e)?(0,h.i)()||pt(e.src,{credentials:(0,r.g)(s),signal:n.signal}).then((t=>{this.c("stream-type-change",t)})).catch(i.a1):this.c("stream-type-change","on-demand"),(0,i.p)((()=>t?.loadSource(e,(0,i.p)(this.a.$state.preload)))),()=>n.abort()}try{(0,i.r)(e.src)&&(0,r.p)(new URL(e.src).origin,"preconnect")}catch(t){}}}}function bt(t){return((0,i.w)(t)?t:[!(0,i.r)(t)&&"src"in t?t:{src:t}]).map((({src:t,type:e,...s})=>({src:t,type:e??((0,i.r)(t)?ft.get(t):null)??(!(0,i.r)(t)||t.startsWith("blob:")?"video/object":t.includes("youtube")?"video/youtube":t.includes("vimeo")?"video/vimeo":"?"),...s})))}function mt(t,e){return t?.src===e?.src&&t?.type===e?.type}class yt{constructor(t,e){this.yc=t,this.a=e,this.tf=[],(0,i.e)(this.$h.bind(this))}$h(){const t=this.yc();for(const e of this.tf)if(!t.some((t=>t.id===e.id))){const t=e.id&&this.a.textTracks.getById(e.id);t&&this.a.textTracks.remove(t)}for(const e of t){const t=e.id||r.b.createId(e);this.a.textTracks.getById(t)||(e.id=t,this.a.textTracks.add(e))}this.tf=t}}var $t=Object.defineProperty,vt=Object.getOwnPropertyDescriptor;class wt extends i.I{constructor(){super(...arguments),this.xc=(0,i.m)([]),this.yc=(0,i.m)([]),this.ha=null,this.Id=-1}static{this.props={loaders:[]}}static{this.state=new i.S({loader:null})}onSetup(){this.a=(0,n.u)(),this.uf=new gt(this.xc,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.uf.connect(),new yt(this.yc,this.a);const e=new ResizeObserver((0,i.V)(this.O.bind(this)));e.observe(t);const s=new MutationObserver(this.vf.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.O(),this.vf(),(0,i.o)((()=>{e.disconnect(),s.disconnect()}))}load(t){window.cancelAnimationFrame(this.Id),this.Id=requestAnimationFrame((()=>this.ai(t))),(0,i.o)((()=>{window.cancelAnimationFrame(this.Id)}))}ai(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.a;this.ha===e&&e?.target===t&&(0,i.p)(s)||(this.wf(),this.ha=e,e&&(e.target=t||null),e&&t&&e.load(this.a).then((t=>{this.scope&&(0,i.p)(this.$state.loader)===e&&this.a.delegate.c("provider-change",t)})))}onDestroy(){this.ha=null,this.wf()}wf(){this.a.delegate.c("provider-change",null)}O(){if(!this.el)return;const t=this.a.player,e=this.el.offsetWidth,s=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(s),t.el&&((0,i.f)(t.el,"--media-width",e+"px"),(0,i.f)(t.el,"--media-height",s+"px")))}vf(){const t=[],e=[],s=this.el.children;for(const i of s)i instanceof HTMLSourceElement?t.push({src:i.src,type:i.type}):i instanceof HTMLTrackElement&&e.push({id:i.id,src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")});this.xc.set(t),this.yc.set(e),(0,i.P)()}}((t,e,s,i)=>{for(var n,r=vt(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&$t(e,s,r)})([i.a0],wt.prototype,"load");class kt extends i.I{static{this.props={hideDelay:2e3,hideOnMouseLeave:!1}}onSetup(){this.a=(0,n.u)(),(0,i.e)(this.bi.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.a.$state;(0,i.f)(t,"pointer-events","none"),(0,a.s)(t,"role","group"),this.setAttributes({"data-visible":this.xf.bind(this),"data-fullscreen":s,"data-pip":e}),(0,i.e)((()=>{this.dispatch("change",{detail:this.xf()})})),(0,i.e)(this.ci.bind(this)),(0,i.e)((()=>{const e=s();for(const s of["top","right","bottom","left"])(0,i.f)(t,`padding-${s}`,e&&`env(safe-area-inset-${s})`)}))}ci(){if(!this.el)return;const{$iosControls:t}=this.a,{controls:e}=this.a.$state,s=e()||t();(0,i.k)(this.el,"aria-hidden",s?"true":null),(0,i.f)(this.el,"display",s?"none":null)}bi(){const{controls:t}=this.a.player,{hideDelay:e,hideOnMouseLeave:s}=this.$props;t.defaultDelay=2e3===e()?this.a.$props.controlsDelay():e(),t.hideOnMouseLeave=s()}xf(){const{controlsVisible:t}=this.a.$state;return t()}}class xt extends i.X{constructor(t){super(),this.j=t,this.Ac=-1,this.Bc=-1,this.Ia=null,(0,i.e)(this.di.bind(this))}onDestroy(){this.Ia?.(),this.Ia=null}di(){const t=this.j.C();if(!t)return void this.hide();const e=this.show.bind(this),s=this.hide.bind(this);this.j.zc(t,e,s)}show(t){window.cancelAnimationFrame(this.Bc),this.Bc=-1,this.Ia?.(),this.Ia=null,this.Ac=window.setTimeout((()=>{this.Ac=-1;const e=this.j.u();e&&e.style.removeProperty("display"),(0,i.p)((()=>this.j.B(!0,t)))}),this.j.yf?.()??0)}hide(t){window.clearTimeout(this.Ac),this.Ac=-1,(0,i.p)((()=>this.j.B(!1,t))),this.Bc=requestAnimationFrame((()=>{this.Bc=-1;const t=this.j.u();if(t){const e=()=>{t.style.display="none",this.Ia=null};if((0,a.h)(t)){this.Ia?.();const s=(0,i.l)(t,"animationend",e,{once:!0});this.Ia=s}else e()}}))}}const Tt=(0,i.Q)();let Pt=0;class St extends i.I{constructor(){super(),this.ca="media-tooltip-"+ ++Pt,this.C=(0,i.m)(null),this.u=(0,i.m)(null),new rt;const{showDelay:t}=this.$props;new xt({C:this.C,u:this.u,yf:t,zc(t,e,s){(0,i.l)(t,"touchstart",(t=>t.preventDefault()),{passive:!1}),(0,i.l)(t,"focus",e),(0,i.l)(t,"blur",s),(0,i.l)(t,"mouseenter",e),(0,i.l)(t,"mouseleave",s)},B:this.ei.bind(this)})}static{this.props={showDelay:500}}onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,i.Z)(Tt,{C:this.C,u:this.u,Jd:this.Jd.bind(this),Kd:this.Kd.bind(this),Ld:this.Ld.bind(this),Md:this.Md.bind(this)})}Jd(t){this.C.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),(0,i.k)(t,"data-describedby",this.ca)}Kd(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.C.set(null)}Ld(t){t.setAttribute("id",this.ca),t.style.display="none",(0,a.s)(t,"role","tooltip"),this.u.set(t)}Md(t){t.removeAttribute("id"),t.removeAttribute("role"),this.u.set(null)}ei(t){const e=this.C(),s=this.u();e&&(0,i.k)(e,"aria-describedby",t?this.ca:null);for(const n of[this.el,e,s])n&&(0,i.k)(n,"data-visible",t)}}class Et extends i.I{static{this.props={placement:"top center",offset:0,alignOffset:0}}constructor(){super(),new rt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.Ja(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Ja(t);const e=(0,i.J)(Tt);(0,i.o)((()=>e.Md(t))),(0,i.o)((0,a.r)((()=>{this.connectScope&&(0,i.e)(this.Nd.bind(this))})))}Ja(t){(0,i.J)(Tt).Ld(t)}Nd(){const{placement:t,offset:e,alignOffset:s}=this.$props;return(0,a.d)(this.el,this.fi(),t(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:e()})}fi(){return(0,i.J)(Tt).C()}}class At extends i.X{constructor(t){super(),this.j=t,new rt,t.kb&&new I(t.kb)}static{this.props={disabled:!1}}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.n,"aria-pressed":this.gi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){(0,a.s)(t,"tabindex","0"),(0,a.s)(t,"role","button"),(0,a.s)(t,"type","button")}onConnect(t){(0,a.o)(t,this.hi.bind(this));for(const t of["click","touchstart"])this.listen(t,this.ii.bind(this))}gi(){return(0,i.a2)(this.j.n())}ji(t){(0,i.a3)(this.j.n)&&this.j.n.set((t=>!t))}hi(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled"))return t.preventDefault(),void t.stopImmediatePropagation();t.preventDefault(),(this.j.v??this.ji).call(this,t)}ii(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}var jt=Object.defineProperty,Lt=Object.getOwnPropertyDescriptor;class Ct extends i.I{constructor(){super(),this.zf=(0,i.m)(!1),new At({n:this.zf})}static{this.props={disabled:!1,defaultPressed:!1}}get pressed(){return this.zf()}}((t,e,s,i)=>{for(var n,r=Lt(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&jt(e,s,r)})([i.$],Ct.prototype,"pressed");class Ot extends i.I{constructor(){super(),new At({n:this.n.bind(this),kb:"togglePaused",v:this.v.bind(this)})}static{this.props=At.props}onSetup(){this.a=(0,n.u)();const{paused:t,ended:e}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),(0,a.e)(t,this.Z.bind(this))}v(t){const e=this.a.remote;this.n()?e.pause(t):e.play(t)}n(){const{paused:t}=this.a.$state;return!t()}Z(){const{paused:t}=this.a.$state;return t()?"Play":"Pause"}}function Mt(t){return()=>t()?"true":"false"}class qt extends i.I{constructor(){super(),new At({n:this.n.bind(this),kb:"toggleCaptions",v:this.v.bind(this)})}static{this.props=At.props}onSetup(){this.a=(0,n.u)(),this.setAttributes({"data-active":this.n.bind(this),"data-supported":()=>!this.lb(),"aria-hidden":Mt(this.lb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),(0,a.e)(t,this.Z.bind(this))}v(t){this.a.remote.toggleCaptions(t)}n(){const{textTrack:t}=this.a.$state,e=t();return!!e&&(0,r.i)(e)}lb(){const{textTracks:t}=this.a.$state;return 0==t().filter(r.i).length}Z(){const{textTrack:t}=this.a.$state;return t()?"Closed-Captions Off":"Closed-Captions On"}}class Dt extends i.I{constructor(){super(),new At({n:this.n.bind(this),kb:"toggleFullscreen",v:this.v.bind(this)})}static{this.props={...At.props,target:"prefer-media"}}onSetup(){this.a=(0,n.u)();const{fullscreen:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":Mt((()=>!e()))})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),(0,a.e)(t,this.Z.bind(this))}v(t){const e=this.a.remote,s=this.$props.target();this.n()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}n(){const{fullscreen:t}=this.a.$state;return t()}Nb(){const{canFullscreen:t}=this.a.$state;return t()}Z(){const{fullscreen:t}=this.a.$state;return t()?"Exit Fullscreen":"Enter Fullscreen"}}class It extends i.I{constructor(){super(),new At({n:this.n.bind(this),kb:"toggleMuted",v:this.v.bind(this)})}static{this.props=At.props}onSetup(){this.a=(0,n.u)(),this.setAttributes({"data-muted":this.n.bind(this),"data-state":this.ki.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),(0,a.e)(t,this.Z.bind(this))}v(t){const e=this.a.remote;this.n()?e.unmute(t):e.mute(t)}n(){const{muted:t,volume:e}=this.a.$state;return t()||0===e()}Z(){return this.n()?"Unmute":"Mute"}ki(){const{muted:t,volume:e}=this.a.$state,s=e();return t()||0===s?"muted":s>=.5?"high":s<.5?"low":void 0}}class Ft extends i.I{constructor(){super(),new At({n:this.n.bind(this),kb:"togglePictureInPicture",v:this.v.bind(this)})}static{this.props=At.props}onSetup(){this.a=(0,n.u)();const{pictureInPicture:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":Mt((()=>!e()))})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),(0,a.e)(t,this.Z.bind(this))}v(t){const e=this.a.remote;this.n()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}n(){const{pictureInPicture:t}=this.a.$state;return t()}Nb(){const{canPictureInPicture:t}=this.a.$state;return t()}Z(){const{pictureInPicture:t}=this.a.$state;return t()?"Exit Picture In Picture":"Enter Picture In Picture"}}class Rt extends i.I{constructor(){super(),new rt}static{this.props={disabled:!1,seconds:30}}onSetup(){this.a=(0,n.u)();const{seeking:t}=this.a.$state,{seconds:e}=this.$props,s=this.Nb.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":Mt((()=>!s()))})}onAttach(t){(0,a.s)(t,"tabindex","0"),(0,a.s)(t,"role","button"),(0,a.s)(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),(0,a.e)(t,this.Z.bind(this))}onConnect(t){(0,a.o)(t,this.v.bind(this))}Nb(){const{canSeek:t}=this.a.$state;return t()}Z(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}v(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.a.$state,n=i()+e();this.a.remote.seek(n,t)}}class Nt extends i.I{constructor(){super(),new rt}static{this.props={disabled:!1}}onSetup(){this.a=(0,n.u)();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.a.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":Mt((()=>t()||s())),"aria-hidden":Mt(i)})}onAttach(t){(0,a.s)(t,"tabindex","0"),(0,a.s)(t,"role","button"),(0,a.s)(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){(0,a.o)(t,this.v.bind(this))}v(t){const{disabled:e}=this.$props,{liveEdge:s}=this.a.$state;e()||s()||this.a.remote.seekToLiveEdge(t)}}const Vt=new i.S({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Ht(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return Ht(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function Ht(t,e,s){const i=e-t;return i>0?(s-t)/i:0}const Wt={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class Kt extends i.X{constructor(t,e){super(),this.j=t,this.a=e,this.i=null,this.ua=null,this.mb=null,this.ti=tt((t=>{this.va(this.Dc(t),t)}),20,{leading:!0})}onConnect(){if((0,i.e)(this.li.bind(this)),(0,i.e)(this.mi.bind(this)),this.j.ni){const t=this.a.player.el?.querySelector("media-provider,[data-media-provider]");t&&(this.i=t,(0,i.l)(t,"touchstart",this.oi.bind(this),{passive:!0}),(0,i.l)(t,"touchmove",this.pi.bind(this),{passive:!1}))}}oi(t){this.ua=t.touches[0]}pi(t){if((0,i.N)(this.ua)||(0,a.i)(t))return;const e=t.touches[0],s=e.clientX-this.ua.clientX,n=e.clientY-this.ua.clientY,r=this.$state.dragging();!r&&Math.abs(n)>20||r||Math.abs(s)>20&&(this.ua=e,this.mb=this.$state.value(),this.Od(this.mb,t))}li(){this.j.K()||(this.listen("focus",this.Lb.bind(this)),this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointermove",this.qi.bind(this)),this.listen("pointerleave",this.Dd.bind(this)),this.listen("pointerdown",this.ri.bind(this)),this.listen("keydown",this.Ab.bind(this)),this.listen("keyup",this.zb.bind(this)))}mi(){!this.j.K()&&this.$state.dragging()&&((0,i.l)(document,"pointerup",this.si.bind(this)),(0,i.l)(document,"pointermove",this.ti.bind(this)),h.g&&(0,i.l)(document,"touchmove",this.ui.bind(this),{passive:!1}))}Lb(){this.va(this.$state.value())}Pd(t,e){const{value:s,min:i,max:n,dragging:r}=this.$state,a=Math.max(i(),Math.min(t,n()));s.set(a);const h=this.createEvent("value-change",{detail:a,trigger:e});if(this.dispatch(h),this.j.o?.(h),r()){const t=this.createEvent("drag-value-change",{detail:a,trigger:e});this.dispatch(t),this.j.nb?.(t)}}va(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.Pd(t,e)}Dc(t){let e,s=this.el.getBoundingClientRect(),{min:n,max:r}=this.$state;if("vertical"===this.$props.orientation()){const{bottom:i,height:n}=s;e=(i-t.clientY)/n}else if(this.ua&&(0,i.a)(this.mb)){const{width:s}=this.i.getBoundingClientRect(),i=(t.clientX-this.ua.clientX)/s,a=r()-n(),h=a*Math.abs(i);e=(i<0?this.mb-h:this.mb+h)/a}else{const{left:i,width:n}=s;e=(t.clientX-i)/n}return Math.max(n(),Math.min(r(),this.j.Ob(function(t,e,s,i){return t+i*((e-t)*(0,c.d)(0,s,1)/i)}(n(),r(),e,this.j.Ka()))))}Cd(t){this.$state.pointing.set(!0)}qi(t){const{dragging:e}=this.$state;e()||this.va(this.Dc(t),t)}Dd(t){this.$state.pointing.set(!1)}ri(t){if(0!==t.button)return;const e=this.Dc(t);this.Od(e,t),this.va(e,t)}Od(t,e){const{dragging:s}=this.$state;if(s())return;s.set(!0),this.a.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),this.j.Qd?.(i)}Af(t,e){const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.a.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),this.j.Ec?.(i),this.ua=null,this.mb=null}Ab(t){const{key:e}=t,{min:s,max:n}=this.$state;let r;if("Home"===e||"PageUp"===e?r=s():"End"===e||"PageDown"===e?r=n():!t.metaKey&&/[0-9]/.test(e)&&(r=(n()-s())/10*Number(e)),!(0,i.i)(r))return this.va(r,t),void this.Pd(r,t);const a=this.Bf(t);if((0,i.i)(a))return;const h=e===this.Rd;!this.$state.dragging()&&h&&this.Od(a,t),this.va(a,t),h||this.Pd(a,t),this.Rd=e}zb(t){this.Rd="";const{dragging:e,value:s}=this.$state;if(!e())return;const i=this.Bf(t)??s();this.va(i),this.Af(i,t)}Bf(t){const{key:e,shiftKey:s}=t;if(!Object.keys(Wt).includes(e))return;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:i}=this.$props,{value:n,min:r,max:a}=this.$state,h=this.j.Ka(),o=this.j.Pb(),c=(s?o*i():o)*Number(Wt[e]),l=(n()+c)/h;return Math.max(r(),Math.min(a(),Number((h*l).toFixed(3))))}si(t){if(0!==t.button)return;const e=this.Dc(t);this.va(e,t),this.Af(e,t)}ui(t){t.preventDefault()}}const Qt=(0,i.Q)((()=>({}))),zt=(0,i.Q)();class Bt extends i.X{constructor(t){super(),this.j=t,this.xi=(0,i.V)(((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")}))}static{this.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5}}onSetup(){this.a=(0,n.u)();const t=new rt;t.attach(this),this.$state.focused=t.focused.bind(t),(0,i.a4)(Qt)||(0,i.Z)(Qt,{default:"value"}),(0,i.Z)(zt,{ta:this.$props.orientation,Fc:this.j.K,Cf:(0,i.m)(null)}),(0,i.e)(this.D.bind(this)),(0,i.e)(this.Qb.bind(this)),this.vi(),new Kt(this.j,this.a).attach(this)}onAttach(t){(0,a.s)(t,"role","slider"),(0,a.s)(t,"tabindex","0"),(0,a.s)(t,"autocomplete","off"),(0,i.e)(this.Df.bind(this))}D(){const{dragging:t,value:e,min:s,max:n}=this.$state;(0,i.p)(t)||e.set(function(t,e,s,i){return(0,c.d)(t,(0,c.r)(s,(0,c.g)(i)),e)}(s(),n(),e(),this.j.Ka()))}Qb(){if(!this.j.K())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}wi(){return(0,i.a2)(this.j.K())}vi(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.wi.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.j.ia,"aria-valuetext":this.j.ja,"aria-orientation":t})}Df(){const{fillPercent:t,pointerPercent:e}=this.$state;this.xi((0,c.r)(t(),3),(0,c.r)(e(),3))}}class Jt extends i.I{static{this.props={...Bt.props,min:0,max:100,value:0}}static{this.state=Vt}constructor(){super(),new Bt({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.$props.disabled,ia:this.ia.bind(this),ja:this.ja.bind(this)})}onSetup(){(0,i.e)(this.D.bind(this)),(0,i.e)(this.yi.bind(this))}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return(0,c.r)(t()/e()*100,2)+"%"}D(){const{value:t}=this.$props;this.$state.value.set(t())}yi(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}const Xt=new Map,Ut=new Set,Zt=new Set;class _t{constructor(t,e){this.$src=t,this.a=e,this.$cues=(0,i.m)([]),(0,i.e)(this.zi.bind(this)),Zt.add(this),(0,i.o)((()=>Zt.delete(this)))}static create(t){const e=(0,n.u)();return new _t(t,e)}zi(){const{canLoad:t}=this.a.$state;if(!t())return;const e=new AbortController,{crossorigin:i}=this.a.$state,n=this.$src();if(n){if(Xt.has(n)){const t=Xt.get(n);if(Xt.delete(n),Xt.set(n,t),Xt.size>30){const t=Xt.keys().next().value;Xt.delete(t)}this.$cues.set(Xt.get(n))}else Ut.has(n)||(Ut.add(n),s.e(1264).then(s.bind(s,1264)).then((async({parseResponse:t})=>{try{const s=await fetch(n,{signal:e.signal,credentials:(0,r.g)(i())});if("application/json"===s.headers.get("content-type")){try{const{cues:t}=(0,r.c)(await s.text(),window.VTTCue);this.Ef(n,t)}catch(t){}return}const{cues:a}=await t(s);this.Ef(n,a)}catch(t){}})));return()=>{e.abort(),this.$cues.set([])}}}Ef(t,e){this.$cues.set(e);for(const s of Zt)(0,i.p)(s.$src)===t&&s.$cues.set(e);Xt.set(t,e),Ut.delete(t)}}class Yt extends i.I{constructor(){super(...arguments),this.Td=[],this.Ff=(0,i.V)(this.Fi.bind(this))}static{this.props={src:"",time:0}}static{this.state=new i.S({src:"",img:null,coords:null,activeCue:null,loading:!1,error:null,hidden:!1})}onSetup(){this.a=(0,n.u)(),this.Sd=_t.create(this.$props.src),this.setAttributes({"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":Mt(this.$state.hidden)})}onConnect(t){(0,i.e)(this.Ud.bind(this)),(0,i.e)(this.ob.bind(this)),(0,i.e)(this.Ea.bind(this)),(0,i.e)(this.Ai.bind(this)),(0,i.e)(this.Bi.bind(this))}Ud(){const t=this.$state.img();t&&((0,i.l)(t,"load",this.qd.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}Ea(){const{src:t,loading:e,error:s}=this.$state;t(),e.set(!0),s.set(null)}qd(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null),this.Ff()}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}wa(){const{error:t}=this.$state;return!(0,i.N)(t())}ob(){const{hidden:t}=this.$state,{duration:e}=this.a.$state,s=this.Sd.$cues();t.set(this.wa()||!Number.isFinite(e())||0===s.length)}Gf(){return this.$props.time()}Ai(){const t=this.Gf(),{activeCue:e}=this.$state,{duration:s}=this.a.$state,i=this.Sd.$cues();i&&Number.isFinite(s())?e.set((0,r.f)(i,t)):e.set(null)}Bi(){let{activeCue:t}=this.$state,e=t(),s=(0,i.p)(this.$props.src);if(/^https?:/.test(s)||(s=location.href),!s||!e)return this.$state.src.set(""),void this.Ci();const[n,r=""]=(e.text||"").split("#");this.$state.coords.set(this.Di(r)),this.$state.src.set(this.Ei(n,s)),this.Ff()}Ei(t,e){return/^https?:/.test(t)?t:new URL(t,e).href}Di(t){const[e,s]=t.split("="),i={},n=s?.split(",");if(!e||!s)return null;for(let t=0;t<e.length;t++)i[e[t]]=+n[t];return i}Fi(){if(!this.scope)return;const t=this.$state.img(),e=this.$state.coords();if(!t||!this.el)return;const s=e?.w??t.naturalWidth,i=e?.h??t.naturalHeight,{maxWidth:n,maxHeight:r,minWidth:a,minHeight:h}=getComputedStyle(this.el),o=Math.max(parseInt(a)/s,parseInt(h)/i),c=Math.min(parseInt(n)/s,parseInt(r)/i),l=c<1?c:o>1?o:1;this.pb(this.el,"--thumbnail-width",s*l+"px"),this.pb(this.el,"--thumbnail-height",i*l+"px"),this.pb(t,"width",t.naturalWidth*l+"px"),this.pb(t,"height",t.naturalHeight*l+"px"),this.pb(t,"transform",e?`translate(-${e.x*l}px, -${e.y*l}px)`:""),this.pb(t,"max-width","none")}pb(t,e,s){t.style.setProperty(e,s),this.Td.push((()=>t.style.removeProperty(e)))}Ci(){for(const t of this.Td)t();this.Td=[]}}var Gt=Object.defineProperty,te=Object.getOwnPropertyDescriptor;class ee extends i.I{static{this.props={src:null}}static{this.state=new i.S({video:null,src:null,canPlay:!1,error:null,hidden:!1})}get video(){return this.$state.video()}onSetup(){this.a=(0,n.u)(),this.Q=(0,i.z)(Jt.state),this.setAttributes({"data-loading":this.Rb.bind(this),"data-hidden":this.$state.hidden,"data-error":this.wa.bind(this),"aria-hidden":Mt(this.$state.hidden)})}onAttach(t){(0,i.e)(this.Gi.bind(this)),(0,i.e)(this.fd.bind(this)),(0,i.e)(this.ob.bind(this)),(0,i.e)(this.Hi.bind(this)),(0,i.e)(this.Ii.bind(this))}Gi(){const t=this.$state.video();t&&(t.readyState>=2&&this.hc(),(0,i.l)(t,"canplay",this.hc.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}fd(){const{src:t}=this.$state,{canLoad:e}=this.a.$state;t.set(e()?this.$props.src():null)}Rb(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}wa(){const{error:t}=this.$state;return!(0,i.N)(t)}ob(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:i}=this.a.$state;e.set(s()&&(!t()||this.wa()||!Number.isFinite(i())))}Hi(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}hc(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}U(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}Ii(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.a.$state,{pointerRate:i}=this.Q,n=t();e()&&n&&Number.isFinite(s())&&Number.isFinite(i())&&(n.currentTime=i()*s())}}function se(t,e){const s=String(t),i=s.length;return i<e?`${"0".repeat(e-i)}${t}`:s}function ie(t){return{hours:Math.trunc(t/3600),minutes:Math.trunc(t%3600/60),seconds:Math.trunc(t%60),fraction:Number((t-Math.trunc(t)).toPrecision(3))}}function ne(t,e=null,s=null,n=!1){const{hours:r,minutes:a,seconds:h}=ie(t),o=e?se(r,2):r,c=s||(0,i.N)(s)&&t>=3600?se(a,2):a,l=se(h,2);return r>0||n?`${o}:${c}:${l}`:`${c}:${l}`}function re(t){const e=[],{hours:s,minutes:i,seconds:n}=ie(t);return s>0&&e.push(`${s} hour`),i>0&&e.push(`${i} min`),(n>0||0===e.length)&&e.push(`${n} sec`),e.join(" ")}((t,e,s,i)=>{for(var n,r=te(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&Gt(e,s,r)})([i.$],ee.prototype,"video");var ae=Object.defineProperty,he=Object.getOwnPropertyDescriptor;class oe extends i.I{static{this.props={type:"pointer",format:null,showHours:!1,padHours:null,padMinutes:null,decimalPlaces:2}}onSetup(){this.Q=(0,i.z)(Jt.state),this.Sb=(0,i.J)(Qt),this.Ji=(0,i.n)(this.getValueText.bind(this))}getValueText(){const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:n,showHours:r}=this.$props,{value:a,pointerValue:h,min:o,max:l}=this.Q,u=e()??this.Sb.default,d="current"===t()?a():h();if("percent"===u){const t=d/(l()-o())*100;return(this.Sb.percent??c.r)(t,s())+"﹪"}return"time"===u?(this.Sb.time??ne)(d,i(),n(),r()):this.Sb.value?.(d)??d.toFixed(2)}}((t,e,s,i)=>{for(var n,r=he(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&ae(e,s,r)})([i.a0],oe.prototype,"getValueText");class ce extends i.I{static{this.props={offset:0,noClamp:!1}}onSetup(){this.Q=(0,i.J)(zt);const{active:t}=(0,i.z)(Jt.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{Cf:e}=this.Q;e.set(t),(0,i.o)((()=>e.set(null))),(0,i.e)(this.Hf.bind(this));const s=new ResizeObserver(this.Hf.bind(this));s.observe(t),(0,i.o)((()=>s.disconnect()))}Hf(){const{Fc:t,ta:e}=this.Q;if(t())return;const s=this.el,{offset:i,noClamp:n}=this.$props;!function(t,{clamp:e,offset:s,orientation:i}){const{width:n,height:r}=t.getBoundingClientRect(),a={top:null,right:null,bottom:null,left:null};if(a["horizontal"===i?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${s}px))`,"horizontal"===i){const t=n/2;if(e){const e=`max(0px, calc(var(--slider-pointer) - ${t}px))`,s=`calc(100% - ${n}px)`;a.left=`min(${e}, ${s})`}else a.left=`calc(var(--slider-pointer) - ${t}px)`}else{const t=r/2;if(e){const e=`max(${t}px, calc(var(--slider-pointer) - ${t}px))`,s=`calc(100% - ${r}px)`;a.bottom=`min(${e}, ${s})`}else a.bottom=`calc(var(--slider-pointer) - ${t}px)`}Object.assign(t.style,a)}(s,{clamp:!n(),offset:i(),orientation:e()})}}class le extends i.I{constructor(){super(...arguments),this.If=tt(this.ab.bind(this),25)}static{this.props={...Bt.props,keyStep:5,shiftKeyMultiplier:2}}static{this.state=Vt}onSetup(){this.a=(0,n.u)(),(0,i.Z)(Qt,{default:"percent"}),new Bt({Ka:this.$props.step,Pb:this.$props.keyStep,K:this.$props.disabled,Ob:Math.round,ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),(0,i.e)(this.Fd.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),(0,a.s)(t,"aria-label","Volume");const{canSetVolume:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":Mt((()=>!e()))})}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return(0,c.r)(t()/e()*100,2)+"%"}Fd(){const{muted:t,volume:e}=this.a.$state,s=t()?0:100*e();this.$state.value.set(s),this.dispatch("value-change",{detail:s})}ab(t){if(!t.trigger)return;const e=(0,c.r)(t.detail/100,3);this.a.remote.changeVolume(e,t)}o(t){this.If(t)}nb(t){this.If(t)}}class ue extends i.I{constructor(){super(),this.Jf=(0,i.m)(null),this.Wd=!1,new Bt({ni:!0,Ka:this.Ka.bind(this),Pb:this.Pb.bind(this),K:this.K.bind(this),Ob:this.Ob,ia:this.ia.bind(this),ja:this.ja.bind(this),Qd:this.Qd.bind(this),nb:this.nb.bind(this),Ec:this.Ec.bind(this),o:this.o.bind(this)})}static{this.props={...Bt.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,seekingRequestThrottle:100}}static{this.state=Vt}onSetup(){this.a=(0,n.u)(),(0,i.Z)(Qt,{default:"time",value:this.Ki.bind(this),time:this.Li.bind(this)}),this.setAttributes({"data-chapters":this.Mi.bind(this)}),this.setStyles({"--slider-progress":this.Ni.bind(this)}),(0,i.e)(this.jb.bind(this)),(0,i.e)(this.Oi.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),(0,a.s)(t,"aria-label","Seek")}onConnect(t){(0,i.e)(this.Pi.bind(this)),(0,r.o)(this.a.textTracks,"chapters",this.Jf.set)}Ni(){const{bufferedEnd:t,duration:e}=this.a.$state;return(0,c.r)(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}Mi(){const{duration:t}=this.a.$state;return this.Jf()?.cues.length&&Number.isFinite(t())&&t()>0}Oi(){this.Vd=tt(this.qa.bind(this),this.$props.seekingRequestThrottle())}jb(){const{currentTime:t}=this.a.$state,{value:e,dragging:s}=this.$state,n=this.Qi(t());(0,i.p)(s)||(e.set(n),this.dispatch("value-change",{detail:n}))}Pi(){const t=this.a.player.el,{Cf:e}=(0,i.J)(zt);t&&e()&&(0,i.k)(t,"data-preview",this.$state.active())}qa(t,e){this.a.remote.seeking(t,e)}Ri(t,e,s){this.Vd.cancel();const{live:i}=this.a.$state;i()&&e>=99?this.a.remote.seekToLiveEdge(s):this.a.remote.seek(t,s)}Qd(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:e}=this.a.$state;this.Wd=!e(),this.a.remote.pause(t)}}nb(t){this.Vd(this.Tb(t.detail),t)}Ec(t){const e=t.detail;this.Ri(this.Tb(e),e,t);const{pauseWhileDragging:s}=this.$props;s()&&this.Wd&&(this.a.remote.play(t),this.Wd=!1)}o(t){const{dragging:e}=this.$state;!e()&&t.trigger&&this.Ec(t)}Ka(){const t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Pb(){const t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Ob(t){return(0,c.r)(t,3)}K(){const{canSeek:t}=this.a.$state;return this.$props.disabled()||!t()}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const t=this.Tb(this.$state.value()),{duration:e}=this.a.$state;return Number.isFinite(t)?`${re(t)} out of ${re(e())}`:"live"}Tb(t){const{duration:e}=this.a.$state;return(0,c.r)(t/100*e(),5)}Qi(t){const{liveEdge:e,duration:s}=this.a.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?100*i:100}Ki(t){const e=this.Tb(t),{live:s,duration:i}=this.a.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}Li(t,e,s,i){const n=this.Tb(t),{live:r,duration:a}=this.a.$state,h=r()?n-a():n;return Number.isFinite(n)?`${h<0?"-":""}${ne(Math.abs(h),e,s,i)}`:"LIVE"}}var de=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,fe=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?pe(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&de(e,s,r),r};class ge extends i.I{constructor(){super(...arguments),this.La=null,this.R=[],this.Gc=(0,i.m)(null),this._=(0,i.m)([]),this.Ub=(0,i.m)(-1),this.Hc=(0,i.m)(-1),this.Zd=0,this.Xi=(0,i.V)((t=>{let e,s=this._();for(let i=this.Zd;i<this.R.length;i++)if(e=this.ae(s[i],t),this.R[i]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.Zd=i;break}})),this.Yi=(0,i.n)(this.Zi.bind(this)),this.$i=G((()=>{const t=(0,i.p)(this.Gc);this.scope&&t&&t.cues.length&&(this._.set(this._i(t.cues)),this.Ub.set(0))}),150,!0)}static{this.props={disabled:!1}}get cues(){return this._()}get activeCue(){return this._()[this.Ub()]||null}get activePointerCue(){return this._()[this.Hc()]||null}onSetup(){this.a=(0,n.u)(),this.Xd=(0,i.z)(ue.state)}onAttach(t){(0,r.o)(this.a.textTracks,"chapters",this.Kf.bind(this)),(0,i.e)(this._d.bind(this))}onConnect(){(0,i.o)((()=>this.H.bind(this)))}onDestroy(){this.Kf(null)}setRefs(t){if(this.R=t,this.Yd?.dispose(),1===this.R.length){const t=this.R[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.R.length>0&&(0,i.s)((()=>this.Si()),this.Yd=(0,i.q)())}Kf(t){(0,i.p)(this.Gc)!==t&&(this.H(),this.Gc.set(t))}H(){this.R=[],this._.set([]),this.Ub.set(-1),this.Hc.set(-1),this.Zd=0,this.Yd?.dispose()}Si(){this.R.length&&((0,i.e)(this.Ti.bind(this)),(0,i.e)(this.Ui.bind(this)),(0,i.e)(this.Vi.bind(this)),(0,i.e)(this.Wi.bind(this)))}Ti(){let t,e=this._(),s=e[e.length-1].endTime;for(let i=0;i<e.length;i++)t=e[i],this.R[i]&&(this.R[i].style.width=(0,c.r)((t.endTime-t.startTime)/s*100,3)+"%")}Ui(){let{liveEdge:t,ended:e}=this.a.$state,{fillPercent:s,value:n}=this.Xd,r=this._(),a=t(),h=(0,i.p)(this.Ub),o=r[h],c=a?this._.length-1:this.Lf(o&&o.startTime<=(0,i.p)(n)?h:0,s());a||e()||!o?this.$d(0,r.length,"100%"):c>h?this.$d(h,c,"100%"):c<h&&this.$d(c+1,h+1,"0%");const l=a?"100%":this.ae(r[c],s())+"%";this.Mf(this.R[c],l),this.Ub.set(c)}Vi(){let{pointing:t,pointerPercent:e}=this.Xd;if(!t())return void this.Hc.set(-1);const s=this.Lf(0,e());this.Hc.set(s)}$d(t,e,s){for(let i=t;i<e;i++)this.Mf(this.R[i],s)}Mf(t,e){t&&t.style.setProperty("--chapter-fill",e)}Lf(t,e){let s=0,i=this._();for(let n=t;n<i.length;n++)if(s=this.ae(i[n],e),s>=0&&s<100)return n;return 0}Wi(){this.Xi(this.Yi())}Zi(){const{bufferedEnd:t,duration:e}=this.a.$state;return 100*(0,c.r)(Math.min(t()/Math.max(e(),1),1),3)}ae(t,e){const s=this._();if(0===s.length)return 0;const i=s[s.length-1],n=t.startTime/i.endTime*100,r=t.endTime/i.endTime*100;return Math.max(0,(0,c.r)(e>=r?100:(e-n)/(r-n)*100,3))}_i(t){const e=[];0!==t[0].startTime&&e.push(new window.VTTCue(0,t[0].startTime,""));for(let s=0;s<t.length-1;s++){const i=t[s],n=t[s+1];if(e.push(i),n){const t=n.startTime-i.endTime;t>0&&e.push(new window.VTTCue(i.endTime,i.endTime+t,""))}}return e.push(t[t.length-1]),e}_d(){if(!this.scope)return;const{disabled:t}=this.$props;if(t())return;const e=this.Gc();if(e){const t=this.$i.bind(this);t(),(0,i.o)((0,i.l)(e,"add-cue",t)),(0,i.o)((0,i.l)(e,"remove-cue",t))}return this.La=this.aj(),this.La&&(0,i.e)(this.bj.bind(this)),()=>{this.La&&(this.La.textContent="",this.La=null)}}bj(){const t=this.activePointerCue||this.activeCue;this.La&&(this.La.textContent=t?.text||"")}cj(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}aj(){const t=this.cj();return t?t.querySelector('[data-part="chapter-title"]'):null}}fe([i.$],ge.prototype,"cues",1),fe([i.$],ge.prototype,"activeCue",1),fe([i.$],ge.prototype,"activePointerCue",1),fe([i.a0],ge.prototype,"setRefs",1);const be=(0,i.Q)(),me=["a[href]","[tabindex]","input","select","button"].map((t=>`${t}:not([aria-hidden])`)).join(","),ye=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class $e{constructor(t){this.j=t,this.ka=0,this.xa=null,this.da=[]}get r(){return this.da}Nf(t){return(0,i.l)(t,"focus",this.Lb.bind(this)),this.xa=t,(0,i.o)((()=>{this.xa=null})),this}zc(){this.xa&&(this.ea(),(0,i.l)(this.xa,"keyup",this.zb.bind(this)),(0,i.l)(this.xa,"keydown",this.Ab.bind(this)),(0,i.o)((()=>{this.ka=0,this.da=[]})))}ea(){this.ka=0,this.da=this.dj()}Of(t=this.Pf()){const e=this.da[t],s=this.j.ej();e&&s&&requestAnimationFrame((()=>{s.scrollTop=e.offsetTop-s.offsetHeight/2+e.offsetHeight/2}))}qb(t){this.ka=t,this.da[t]?.focus(),this.Of(t)}Pf(){return this.da.findIndex((t=>"true"===t.getAttribute("aria-checked")))}Lb(){this.ea(),setTimeout((()=>{const t=this.Pf();this.qb(t>=0?t:0)}),100)}zb(t){ye.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Ab(t){if(ye.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.fj(t);break;case"Tab":this.qb(this.be(t.shiftKey?-1:1));break;case"ArrowUp":this.qb(this.be(-1));break;case"ArrowDown":this.qb(this.be(1));break;case"Home":case"PageUp":this.qb(0);break;case"End":case"PageDown":this.qb(this.da.length-1)}}be(t){let e=this.ka;do{e=(e+t+this.da.length)%this.da.length}while(null===this.da[e]?.offsetParent);return e}dj(){if(!this.xa)return[];const t=this.xa.querySelectorAll(me),e=[],s=t=>"menu"===t.getAttribute("role");for(const i of t)i instanceof HTMLElement&&null!==i.offsetParent&&(0,a.f)(this.xa,i,s)&&e.push(i);return e}}var ve=Object.defineProperty,we=Object.getOwnPropertyDescriptor,ke=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?we(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&ve(e,s,r),r};let xe=0;class Te extends i.I{constructor(){super(),this.L=(0,i.m)(!1),this.Fc=(0,i.m)(!1),this.C=(0,i.m)(null),this.u=(0,i.m)(null),this.Qf=(0,i.m)(!1),this.Vb=new Set,this.Ic=null,this.rj=this.sj.bind(this),this.pj=this.tj.bind(this),this.qj=this.uj.bind(this);const{showDelay:t}=this.$props;this.Jc=new xt({C:this.C,u:this.u,yf:t,zc:(t,e,s)=>{(0,a.o)(t,(t=>{this.L()?s(t):e(t)}));const i=this.gj();i&&(0,a.o)(i,(t=>{t.stopPropagation(),s(t)}))},B:this.hj.bind(this)})}static{this.props={showDelay:0}}get triggerElement(){return this.C()}get contentElement(){return this.u()}get isSubmenu(){return!!this.ee}onSetup(){this.a=(0,n.u)();const t=++xe;this.ce=`media-menu-${t}`,this.de=`media-menu-button-${t}`,this.rb=new $e({ej:this.ij.bind(this),fj:this.close.bind(this)}),(0,i.a4)(be)&&(this.ee=(0,i.J)(be)),this.setAttributes({"data-open":this.L,"data-submenu":this.isSubmenu,"data-disabled":this.K.bind(this)}),(0,i.Z)(be,{jj:this.C,L:this.L,Wb:(0,i.m)(""),Ma:this.Ma.bind(this),fe:this.fe.bind(this),ge:this.ge.bind(this),he:this.he.bind(this),ie:this.ie.bind(this),je:this.je.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.rb.Nf(t)}onConnect(t){(0,i.e)(this.kj.bind(this)),this.isSubmenu&&this.ee?.je(this),requestAnimationFrame((()=>{this.O()}))}onDestroy(){this.C.set(null),this.u.set(null),this.Ic=null}kj(){const t=this.lj();this.O(),this.Rf(t),t&&((0,i.e)((()=>{const{height:t}=this.a.$state,e=this.u();e&&(0,i.f)(e,"--player-height",t()+"px")})),this.rb.zc(),this.listen("pointerup",this.mj.bind(this)),(0,i.l)(window,"pointerup",this.nj.bind(this)))}fe(t){const e=t.el,s=this.isSubmenu,n=Mt(this.K.bind(this));(0,a.s)(e,"tabindex",s?"-1":"0"),(0,a.s)(e,"role",s?"menuitem":"button"),(0,i.k)(e,"id",this.de),(0,i.k)(e,"aria-haspopup","menu"),(0,i.k)(e,"aria-expanded","false"),(0,i.k)(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.Sf(e),(0,i.e)((()=>{(0,i.k)(e,"data-open",this.L()),(0,i.k)(e,"aria-disabled",n())})),this.C.set(e),(0,i.o)((()=>{this.C.set(null)}))}ge(t){const e=t.el;e.style.setProperty("display","none"),(0,i.k)(e,"id",this.ce),(0,a.s)(e,"role","menu"),(0,a.s)(e,"tabindex","-1"),(0,i.k)(e,"data-submenu",this.isSubmenu),this.u.set(e),(0,i.o)((()=>this.u.set(null))),this.isSubmenu||this.Sf(e),(0,i.e)((()=>{(0,i.k)(e,"data-open",this.L())})),this.rb.Nf(e),this.Rf(!1);{const t=(0,i.V)(this.O.bind(this)),s=new MutationObserver(t);t(),s.observe(e,{childList:!0,subtree:!0}),(0,i.o)((()=>s.disconnect()))}}he(t){this.Ic=t}Sf(t){(0,i.l)(t,"click",(t=>t.stopPropagation())),(0,i.l)(t,"pointerup",(t=>t.stopPropagation()))}Rf(t){const e=(0,i.p)(this.u);e&&(0,i.k)(e,"aria-hidden",(0,i.a2)(!t))}ie(t){this.Qf.set(t)}hj(t,e){if(e?.stopPropagation(),this.L()===t)return;if(this.K())return void(t&&this.Jc.hide(e));const s=this.C(),n=this.u();if(s&&((0,i.k)(s,"aria-controls",t&&this.ce),(0,i.k)(s,"aria-expanded",(0,i.a2)(t))),n&&(0,i.k)(n,"aria-labelledby",t&&this.de),this.L.set(t),this.oj(e),(0,i.P)(),(0,i.G)(e)){t?n?.focus():s?.focus();for(const t of[this.el,n])t&&t.setAttribute("data-keyboard","")}else for(const t of[this.el,n])t&&t.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(this.isSubmenu||this.a.activeMenu===this||(this.a.activeMenu?.close(e),this.a.activeMenu=this),this.Ic?.ke?.(e)):(this.isSubmenu?setTimeout((()=>{for(const t of this.Vb)t.close(e)}),300):this.a.activeMenu=null,this.Ic?.Tj?.(e)),t&&!(0,i.G)(e)&&requestAnimationFrame((()=>{this.rb.ea(),setTimeout((()=>{this.rb.Of()}),100)}))}lj(){return!this.K()&&this.L()}K(){return this.Fc()||this.Qf()}Ma(t){this.Fc.set(t)}mj(t){t.stopPropagation()}nj(t){if(this.isSubmenu)return setTimeout(this.close.bind(this,t),800);this.close(t)}gj(){const t=this.el.querySelector('[data-part="close-target"]');return(0,a.f)(this.el,t,(t=>"menu"===t.getAttribute("role")))?t:null}ij(){if(this.isSubmenu){let t=this.el;for(;t&&"media-menu"!==t.tagName&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}return(0,i.p)(this.u)||null}oj(t){this.isSubmenu||(this.L()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}je(t){this.Vb.add(t),(0,i.l)(t,"open",this.pj),(0,i.l)(t,"close",this.qj),(0,i.o)(this.rj)}sj(t){this.Vb.delete(t)}tj(t){for(const e of this.Vb)if(e!==t.target)for(const t of[e.el,e.triggerElement])t?.setAttribute("aria-hidden","true");requestAnimationFrame((()=>{this.O()}))}uj(){for(const t of this.Vb)for(const e of[t.el,t.triggerElement])e?.setAttribute("aria-hidden","false");requestAnimationFrame((()=>{this.O()}))}O(){const t=(0,i.p)(this.u);if(!t)return;let{paddingTop:e,paddingBottom:s,borderTopWidth:n,borderBottomWidth:r}=getComputedStyle(t),a=parseFloat(e)+parseFloat(s)+parseFloat(n)+parseFloat(r),h=[...t.children];for(const t of h)t instanceof HTMLElement&&"contents"===t.style.display?h.push(...t.children):3===t.nodeType?a+=parseInt(window.getComputedStyle(t).fontSize,10):a+=t.offsetHeight||0;requestAnimationFrame((()=>{t&&((0,i.k)(t,"data-resizing",""),setTimeout((()=>{t&&(0,i.k)(t,"data-resizing",!1)}),400),(0,i.f)(t,"--menu-height",a+"px"))}))}open(t){(0,i.p)(this.L)||(this.Jc.show(t),(0,i.P)())}close(t){(0,i.p)(this.L)&&(this.Jc.hide(t),(0,i.P)())}}ke([i.$],Te.prototype,"triggerElement",1),ke([i.$],Te.prototype,"contentElement",1),ke([i.$],Te.prototype,"isSubmenu",1),ke([i.a0],Te.prototype,"open",1),ke([i.a0],Te.prototype,"close",1);var Pe=Object.defineProperty,Se=Object.getOwnPropertyDescriptor;class Ee extends i.I{constructor(){super(),new rt}static{this.props={disabled:!1}}get expanded(){return this.l?.L()??!1}onSetup(){this.l=(0,i.J)(be)}onAttach(t){this.l.fe(this),(0,i.e)(this.Qb.bind(this)),(0,a.s)(t,"type","button")}onConnect(t){const e=Array.from(t.querySelectorAll('[data-part="hint"]')).pop();e&&(0,i.e)((()=>{const t=this.l.Wb();t&&(e.textContent=t)})),(0,a.o)(t,(t=>{this.dispatch("select",{trigger:t})}))}Qb(){this.l.ie(this.$props.disabled())}}((t,e,s,i)=>{for(var n,r=Se(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&Pe(e,s,r)})([i.$],Ee.prototype,"expanded");class Ae extends i.I{constructor(){super(...arguments),this.A=null}static{this.props={container:null,disabled:!1}}onSetup(){this.a=(0,n.u)(),(0,i.Z)(je,{Ja:this.vj.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.A?.remove(),this.A=null}vj(t){this.Tf(!1),this.A=t,(0,a.r)((()=>{(0,a.r)((()=>{this.connectScope&&(0,i.e)(this.Qb.bind(this))}))}))}Qb(){const{fullscreen:t}=this.a.$state,{disabled:e}=this.$props,s=e();this.Tf("fullscreen"===s?!t():!s)}Tf(t){if(!this.A)return;let e=this.wj(this.$props.container());if(!e)return;const s=this.A.parentElement===e;(0,i.k)(this.A,"data-portal",t),t?s||(this.A.remove(),e.append(this.A)):s&&this.A.parentElement===e&&(this.A.remove(),this.el?.append(this.A))}wj(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}}const je=(0,i.Q)();class Le extends i.I{constructor(){super(),new rt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}static{this.props={placement:null,offset:0,alignOffset:0}}onAttach(t){if(this.l=(0,i.J)(be),this.l.ge(this),(0,i.a4)(je)){const e=(0,i.J)(je);e&&((0,i.Z)(je,null),e.Ja(t),(0,i.o)((()=>e.Ja(null))))}}onConnect(t){(0,i.e)(this.Nd.bind(this))}Nd(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:e,alignOffset:s}=this.$props;return(0,a.d)(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:s(),yOffset:e()})}this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.l.jj()}}const Ce=(0,i.Q)();class Oe extends i.X{constructor(){super(...arguments),this.sb=new Set,this.la=(0,i.m)(""),this.d=null,this.Aj=this.B.bind(this)}get xj(){return Array.from(this.sb).map((t=>t.la()))}get value(){return this.la()}set value(t){this.B(t)}onSetup(){(0,i.Z)(Ce,{add:this.yj.bind(this),remove:this.zj.bind(this)})}onAttach(t){(0,i.a4)(be)||(0,a.s)(t,"role","radiogroup"),this.setAttributes({value:this.la})}onDestroy(){this.sb.clear()}yj(t){this.sb.has(t)||(this.sb.add(t),t.Kc=this.Aj,t.Xb(t.la()===this.la()))}zj(t){t.Kc=null,this.sb.delete(t)}B(t,e){const s=(0,i.p)(this.la);if(!t||t===s)return;const n=this.Uf(s),r=this.Uf(t);n?.Xb(!1,e),r?.Xb(!0,e),this.la.set(t),this.o?.(t,e)}Uf(t){for(const e of this.sb)if(t===(0,i.p)(e.la))return e;return null}}var Me=Object.defineProperty,qe=Object.getOwnPropertyDescriptor,De=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?qe(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Me(e,s,r),r};class Ie extends i.I{constructor(){super(),this.d=new Oe,this.d.o=this.o.bind(this)}static{this.props={value:""}}get values(){return this.d.xj}get value(){return this.d.value}set value(t){this.d.value=t}onSetup(){(0,i.e)(this.D.bind(this))}D(){this.d.value=this.$props.value()}o(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}}De([i.$],Ie.prototype,"values",1),De([i.$],Ie.prototype,"value",1);var Fe=Object.defineProperty,Re=Object.getOwnPropertyDescriptor;class Ne extends i.I{constructor(){super(),this.Na=(0,i.m)(!1),this.d={la:this.$props.value,Xb:this.Xb.bind(this),Kc:null},new rt}static{this.props={value:""}}get checked(){return this.Na()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Na,"aria-checked":Mt(this.Na)})}onAttach(t){const e=(0,i.a4)(be);(0,a.s)(t,"tabindex",e?"-1":"0"),(0,a.s)(t,"role",e?"menuitemradio":"radio"),(0,i.e)(this.D.bind(this))}onConnect(t){this.Bj(),(0,a.o)(t,this.v.bind(this)),(0,i.o)(this.ya.bind(this))}ya(){(0,i.s)((()=>{(0,i.J)(Ce).remove(this.d)}),this.connectScope)}Bj(){(0,i.J)(Ce).add(this.d)}D(){const{value:t}=this.$props,e=t();(0,i.p)(this.Na)&&this.d.Kc?.(e)}v(t){(0,i.p)(this.Na)||(this.B(!0,t),this.Cj(t),this.d.Kc?.((0,i.p)(this.$props.value),t))}Xb(t,e){(0,i.p)(this.Na)!==t&&this.B(t,e)}B(t,e){this.Na.set(t),this.dispatch("change",{detail:t,trigger:e})}Cj(t){this.dispatch("select",{trigger:t})}}((t,e,s,i)=>{for(var n,r=Re(e,s),a=t.length-1;a>=0;a--)(n=t[a])&&(r=n(e,s,r)||r);r&&Fe(e,s,r)})([i.$],Ne.prototype,"checked");var Ve=Object.defineProperty,He=Object.getOwnPropertyDescriptor,We=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?He(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Ve(e,s,r),r};class Ke extends i.I{constructor(){super(),this.ka=(0,i.m)(0),this.z=(0,i.m)(null),this.J=(0,i.m)([]),this.d=new Oe,this.d.o=this.o.bind(this)}static{this.props={thumbnails:""}}get value(){return this.d.value}get disabled(){return!this.J()?.length}onSetup(){this.a=(0,n.u)(),(0,i.a4)(be)&&(this.l=(0,i.J)(be));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.l?.he({ke:this.ke.bind(this)})}getOptions(){return this.J().map(((t,e)=>({cue:t,value:e+"",label:t.text,startTime:ne(t.startTime,!1),duration:re(t.endTime-t.startTime)})))}ke(){(0,i.p)((()=>this.jb()))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.jb.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.tk.bind(this)),(0,r.o)(this.a.textTracks,"chapters",this.z.set)}tk(){const t=this.z();if(!t)return;const e=this.$i.bind(this,t);return e(),(0,i.l)(t,"add-cue",e),(0,i.l)(t,"remove-cue",e),()=>{this.J.set([])}}$i(t){this.J.set([...t.cues])}D(){this.d.value=this.na()}jb(){if(!this.l?.L())return;const t=this.z();if(!t)return void this.ka.set(-1);const{currentTime:e}=this.a.$state,s=e(),n=t.cues.findIndex((t=>(0,r.d)(t,s)));if(this.ka.set(n),n>=0){const e=t.cues[n],r=this.el.querySelector("[aria-checked='true']"),a=(s-e.startTime)/(e.endTime-e.startTime)*100;r&&(0,i.f)(r,"--progress",(0,c.r)(a,3)+"%")}}ma(){this.l?.Ma(this.disabled)}na(){return this.ka()+""}o(t,e){if(this.disabled||!e)return;const s=+t,n=this.z()?.cues;(0,i.a)(s)&&n?.[s]&&(this.ka.set(s),this.a.remote.seek(n[s].startTime,e),this.dispatch("change",{detail:n[s],trigger:e}))}}We([i.$],Ke.prototype,"value",1),We([i.$],Ke.prototype,"disabled",1),We([i.a0],Ke.prototype,"getOptions",1);var Qe=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,Be=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?ze(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Qe(e,s,r),r};class Je extends i.I{constructor(){super(),this.d=new Oe,this.d.o=this.o.bind(this)}static{this.props={emptyLabel:"Default"}}get value(){return this.d.value}get disabled(){const{audioTracks:t}=this.a.$state;return 0===t().length}onSetup(){this.a=(0,n.u)(),(0,i.a4)(be)&&(this.l=(0,i.J)(be))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.Oa.bind(this))}getOptions(){const{audioTracks:t}=this.a.$state;return t().map((t=>({track:t,label:t.label,value:t.label.toLowerCase()})))}D(){this.d.value=this.na()}Oa(){const{emptyLabel:t}=this.$props,{audioTrack:e}=this.a.$state,s=e();this.l?.Wb.set(s?.label??t())}ma(){this.l?.Ma(this.disabled)}na(){const{audioTrack:t}=this.a.$state,e=t();return e?e.label.toLowerCase():""}o(t,e){if(this.disabled)return;const s=this.a.audioTracks.toArray().findIndex((e=>e.label.toLowerCase()===t));if(s>=0){const t=this.a.audioTracks[s];this.a.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:t,trigger:e})}}}Be([i.$],Je.prototype,"value",1),Be([i.$],Je.prototype,"disabled",1),Be([i.a0],Je.prototype,"getOptions",1);var Xe=Object.defineProperty,Ue=Object.getOwnPropertyDescriptor,Ze=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?Ue(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Xe(e,s,r),r};class _e extends i.I{constructor(){super(),this.d=new Oe,this.d.o=this.o.bind(this)}static{this.props={offLabel:"Off"}}get value(){return this.d.value}get disabled(){const{textTracks:t}=this.a.$state;return 0===t().filter(r.i).length}onSetup(){this.a=(0,n.u)(),(0,i.a4)(be)&&(this.l=(0,i.J)(be))}onConnect(t){super.onConnect?.(t),(0,i.e)(this.D.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.Oa.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.a.$state;return[{value:"off",label:t},...e().filter(r.i).map((t=>({track:t,label:t.label,value:this.xk(t)})))]}D(){this.d.value=this.na()}Oa(){const{offLabel:t}=this.$props,{textTrack:e}=this.a.$state,s=e();this.l?.Wb.set(s&&(0,r.i)(s)&&"showing"===s.mode?s.label:t())}ma(){this.l?.Ma(this.disabled)}na(){const{textTrack:t}=this.a.$state,e=t();return e&&(0,r.i)(e)&&"showing"===e.mode?this.xk(e):"off"}o(t,e){if(this.disabled)return;if("off"===t){const t=this.a.textTracks.selected;if(t){const s=this.a.textTracks.toArray().indexOf(t);this.a.remote.changeTextTrackMode(s,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.a.textTracks.toArray().findIndex((e=>this.xk(e)===t));if(s>=0){const t=this.a.textTracks[s];this.a.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:t,trigger:e})}}xk(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}}Ze([i.$],_e.prototype,"value",1),Ze([i.$],_e.prototype,"disabled",1),Ze([i.a0],_e.prototype,"getOptions",1);var Ye=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,ts=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?Ge(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&Ye(e,s,r),r};class es extends i.I{constructor(){super(),this.d=new Oe,this.d.o=this.o.bind(this)}static{this.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]}}get value(){return this.d.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return!e()||0===t().length}onSetup(){this.a=(0,n.u)(),(0,i.a4)(be)&&(this.l=(0,i.J)(be))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.Oa.bind(this)),(0,i.e)(this.ma.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map((t=>({label:1===t?e:t+"×",value:t+""})))}D(){this.d.value=this.na()}Oa(){const{normalLabel:t}=this.$props,{playbackRate:e}=this.a.$state,s=e();this.l?.Wb.set(1===s?t():s+"×")}ma(){this.l?.Ma(this.disabled)}na(){const{playbackRate:t}=this.a.$state;return t()+""}o(t,e){if(this.disabled)return;const s=+t;this.a.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}}ts([i.$],es.prototype,"value",1),ts([i.$],es.prototype,"disabled",1),ts([i.a0],es.prototype,"getOptions",1);var ss=Object.defineProperty,is=Object.getOwnPropertyDescriptor,ns=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?is(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&ss(e,s,r),r};class rs extends i.I{constructor(){super(),this.Dj=(0,i.n)((()=>{const{qualities:t}=this.a.$state;return[...t()].sort(((t,e)=>e.height===t.height?e.bitrate-t.bitrate:e.height-t.height))})),this.d=new Oe,this.d.o=this.o.bind(this)}static{this.props={autoLabel:"Auto",hideBitrate:!1}}get value(){return this.d.value}get disabled(){const{canSetQuality:t,qualities:e}=this.a.$state;return!t()||0===e().length}onSetup(){this.a=(0,n.u)(),(0,i.a4)(be)&&(this.l=(0,i.J)(be))}onConnect(t){(0,i.e)(this.D.bind(this)),(0,i.e)(this.ma.bind(this)),(0,i.e)(this.Oa.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.Dj().map((t=>{const s=t.bitrate>=0?`${(0,c.r)(t.bitrate/1e6,2)} Mbps`:null;return{quality:t,label:t.height+"p",value:this.le(t),bitrate:()=>e()?null:s}}))]}D(){this.d.value=this.na()}Oa(){const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.a.$state,i=s()?s().height+"p":"";this.l?.Wb.set(e()?t()+(i?` (${i})`:""):i)}ma(){this.l?.Ma(this.disabled)}o(t,e){if(this.disabled)return;if("auto"===t)return this.a.remote.changeQuality(-1,e),void this.dispatch("change",{detail:"auto",trigger:e});const{qualities:s}=this.a.$state,n=(0,i.p)(s).findIndex((e=>this.le(e)===t));if(n>=0){const t=(0,i.p)(s)[n];this.a.remote.changeQuality(n,e),this.dispatch("change",{detail:t,trigger:e})}}na(){const{quality:t,autoQuality:e}=this.a.$state;if(e())return"auto";const s=t();return s?this.le(s):"auto"}le(t){return t.height+"_"+t.bitrate}}ns([i.$],rs.prototype,"value",1),ns([i.$],rs.prototype,"disabled",1),ns([i.a0],rs.prototype,"getOptions",1);class as extends i.I{constructor(){super(...arguments),this.i=null,this.Pa=0,this.Vf=-1}static{this.props={event:void 0,action:void 0}}onSetup(){this.a=(0,n.u)();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.i=this.a.player.el?.querySelector("[data-media-provider]"),(0,i.e)(this.Ej.bind(this))}Ej(){let t=this.$props.event();this.i&&t&&(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),("pointerup"===t||"pointerdown"===t)&&"coarse"===this.a.$state.pointer()&&(t="pointerup"===t?"touchend":"touchstart"),(0,i.l)(this.i,t,this.Fj.bind(this),{passive:!1}))}Fj(t){if((0,i.F)(t)&&(0!==t.button||this.a.activeMenu)||(0,i.c)(t)&&this.a.activeMenu||(0,a.i)(t)||!this.Gj(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();const e=(0,i.p)(this.$props.event),s=e?.startsWith("dbl");if(s){if(1===this.Pa)return queueMicrotask((()=>this.Wf(t))),clearTimeout(this.Vf),void(this.Pa=0)}else 0===this.Pa&&setTimeout((()=>{1===this.Pa&&this.Wf(t)}),250);0===this.Pa&&(this.Vf=window.setTimeout((()=>{this.Pa=0}),275)),this.Pa++}Wf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame((()=>{this.Hj()&&this.Ij((0,i.p)(this.$props.action),t),requestAnimationFrame((()=>{this.el.removeAttribute("data-triggered")}))}))}Gj(t){if(!this.el)return!1;if((0,i.F)(t)||(0,i.a5)(t)||(0,i.c)(t)){const e=(0,i.c)(t)?t.changedTouches[0]??t.touches[0]:void 0,s=e?.clientX??t.clientX,n=e?.clientY??t.clientY,r=this.el.getBoundingClientRect(),a=n>=r.top&&n<=r.bottom&&s>=r.left&&s<=r.right;return t.type.includes("leave")?!a:a}return!0}Hj(){const t=this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort(((t,e)=>+getComputedStyle(e).zIndex-+getComputedStyle(t).zIndex))[0]===this.el}Ij(t,e){if(!t)return;const s=new i.D("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[n,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.a.remote.seek((0,i.p)(this.a.$state.currentTime)+(+r||0),e):this.a.remote[(0,i.U)(n)](e),this.dispatch("trigger",{detail:t,trigger:e})}}class hs{constructor(t){this.S=t,this.priority=10,this.z=null,this.sa=(0,i.a6)()}attach(){}canRender(){return!0}detach(){this.sa.empty(),this.S.reset(),this.z=null}changeTrack(t){t&&this.z!==t&&(this.sa.empty(),t.readyState<2?(this.S.reset(),this.sa.add((0,i.l)(t,"load",(()=>this.Xf(t)),{once:!0}))):this.Xf(t),this.sa.add((0,i.l)(t,"add-cue",(t=>{this.S.addCue(t.detail)})),(0,i.l)(t,"remove-cue",(t=>{this.S.removeCue(t.detail)}))),this.z=t)}Xf(t){this.S.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}class os extends i.I{static{this.props={textDir:"ltr"}}onSetup(){this.a=(0,n.u)(),this.setAttributes({"aria-hidden":Mt(this.lb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){this.S?(0,i.e)(this.Yf.bind(this)):s.e(1264).then(s.bind(s,1264)).then((e=>{this.connectScope&&(0,i.s)((()=>{this.W=e;const{CaptionsRenderer:s}=this.W;this.S=new s(t),this.Qa=new hs(this.S),(0,i.e)(this.Yf.bind(this))}),this.connectScope)}))}onDestroy(){this.Qa&&(this.Qa.detach(),this.a.textRenderers.remove(this.Qa)),this.S?.destroy()}lb(){const{textTrack:t}=this.a.$state,e=t();return this.a.$iosControls()||!e||!(0,r.i)(e)}Yf(){const{viewType:t}=this.a.$state;return"audio"===t()?this.Jj():this.Kj()}Jj(){return(0,i.e)(this._d.bind(this)),()=>{this.el.textContent=""}}_d(){if(this.lb())return;const{textTrack:t}=this.a.$state;this.Zf(),(0,i.l)(t(),"cue-change",this.Zf.bind(this)),(0,i.e)(this.Lj.bind(this))}Zf(){this.el.textContent="";const{currentTime:t,textTrack:e}=this.a.$state,s=(0,i.p)(t),n=(0,i.p)(e).activeCues,{renderVTTCueString:r}=this.W;for(const t of n){const e=document.createElement("div");e.setAttribute("data-part","cue"),e.innerHTML=r(t,s),this.el.append(e)}}Lj(){const{currentTime:t}=this.a.$state,{updateTimedVTTCueNodes:e}=this.W;e(this.el,t())}Kj(){return(0,i.e)(this.Mj.bind(this)),(0,i.e)(this.Nj.bind(this)),this.a.textRenderers.add(this.Qa),()=>{this.el.textContent="",this.Qa.detach(),this.a.textRenderers.remove(this.Qa)}}Mj(){this.S.dir=this.$props.textDir()}Nj(){if(this.lb())return;const{currentTime:t}=this.a.$state;this.S.currentTime=t()}}class cs extends i.I{static{this.props={src:void 0,alt:void 0}}static{this.state=new i.S({img:null,src:null,alt:null,loading:!0,error:null,hidden:!1})}onSetup(){this.a=(0,n.u)(),this._f(),this.$f(),this.ob()}onAttach(t){t.style.setProperty("pointer-events","none"),(0,i.e)(this.Ud.bind(this)),(0,i.e)(this._f.bind(this)),(0,i.e)(this.$f.bind(this)),(0,i.e)(this.ob.bind(this));const{started:e}=this.a.$state;this.setAttributes({"data-visible":()=>!e(),"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){const{canLoad:e,poster:s}=this.a.$state;window.requestAnimationFrame((()=>{e()||(0,r.p)(s())})),(0,i.e)(this.Ea.bind(this))}wa(){const{error:t}=this.$state;return!(0,i.N)(t())}ob(){const{src:t}=this.$props,{$iosControls:e}=this.a,{poster:s}=this.a.$state;this.el&&(0,i.k)(this.el,"display",e()?"none":null),this.$state.hidden.set(this.wa()||!(t()||s())||e())}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}Ud(){const t=this.$state.img();t&&((0,i.l)(t,"load",this.lc.bind(this)),(0,i.l)(t,"error",this.U.bind(this)))}_f(){const{canLoad:t,poster:e}=this.a.$state,s=this.$props.src(),i=s||e();s&&e()!==s&&this.a.$state.providedPoster.set(s),this.$state.src.set(t()&&i.length?i:null)}$f(){const{src:t,alt:e}=this.$state;e.set(t()?this.$props.alt():null)}Ea(){const{loading:t,error:e}=this.$state,{canLoad:s,poster:i}=this.a.$state;t.set(s()&&!!i()),e.set(null)}lc(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}}class ls extends i.I{static{this.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1}}static{this.state=new i.S({timeText:""})}onSetup(){this.a=(0,n.u)(),this.ag();const{type:t,remainder:e}=this.$props;this.setAttributes({"data-type":t,"data-remainder":e})}onAttach(t){(0,i.e)(this.ag.bind(this))}ag(){const{type:t,remainder:e,padHours:s,padMinutes:i,showHours:n}=this.$props,r=this.Oj(t()),a=this.a.$state.duration();if(!Number.isFinite(r+a))return void this.$state.timeText.set("LIVE");const h=ne(e()?Math.max(0,a-r):r,s(),i(),n());this.$state.timeText.set(h)}Oj(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.a.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}}var us=Object.defineProperty,ds=Object.getOwnPropertyDescriptor,ps=(t,e,s,i)=>{for(var n,r=i>1?void 0:i?ds(e,s):e,a=t.length-1;a>=0;a--)(n=t[a])&&(r=(i?n(e,s,r):n(r))||r);return i&&r&&us(e,s,r),r};class fs extends i.I{constructor(){super(...arguments),this.menuContainer=null}static{this.props={when:"",smallWhen:"",thumbnails:"",customIcons:!1,translations:null,menuGroup:"bottom",noModal:!1}}get isMatch(){return this.me.matches}get isSmallLayout(){return this.Lc.matches}onSetup(){const{when:t,smallWhen:e,thumbnails:s,translations:r,menuGroup:a,noModal:h}=this.$props;this.me=n.P.create(t),this.Lc=n.P.create(e),this.setAttributes({"data-match":this.me.$matches,"data-size":()=>this.Lc.matches?"sm":null});const o=this;(0,i.Z)(ys,{smQueryList:this.Lc,thumbnails:s,translations:r,menuGroup:a,noModal:h,get menuContainer(){return o.menuContainer}})}}ps([i.$],fs.prototype,"menuContainer",2),ps([i.$],fs.prototype,"isMatch",1),ps([i.$],fs.prototype,"isSmallLayout",1);class gs extends fs{static{this.props={...super.props,when:"(view-type: audio)",smallWhen:"(width < 576)"}}}class bs extends fs{static{this.props={...super.props,when:"(view-type: video)",smallWhen:"(width < 576) or (height < 380)"}}}function ms(t,e){return t()?.[e]??e}const ys=(0,i.Q)();function $s(){return(0,i.J)(ys)}},4276:(t,e,s)=>{s.d(e,{Q:()=>i,c:()=>n});const i={Ya:Symbol(0),Za:Symbol(0)};function n(t){return t instanceof Error?t:Error(JSON.stringify(t))}}}]);